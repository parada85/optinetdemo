$(document).ready(function(){$("#error,#errorfestivo,#errorcita,#erroranterior,#camposvacios").wijdialog({autoOpen:false,resizable:false,width:300,buttons:{Accept:function(){$(this).wijdialog("close")}}});$("#dialogonuevacita").wijdialog({autoOpen:false,show:"clip",hide:"clip",width:900,buttons:{Cancel:function(){$(this).wijdialog("close")}}});$("#detalles").wijdialog({autoOpen:false,hide:"clip",width:700,position:"top",buttons:{Accept:function(){$(this).wijdialog("close")}},close:function(A){$(".botoncarro").removeClass("ui-state-hover");$(".divajax,.divajax1,.divajax2,.divajaxpedido").hide();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");$(".detalleventa, .detallereserva, .detalledevolucion,.detallepedido").button("option","label","Detail").css("color","");$(".apartado").button("option","label","Put aside");$(".reserva").button("option","label","Reserve")}});$("#detalles1").wijdialog({autoOpen:false,hide:"clip",width:900,position:"top",buttons:{Accept:function(){$(this).wijdialog("close")}},close:function(A){$(".boton").removeClass("ui-state-hover");$(".mostrarproductos2").button("option","label","Reserves");$(".mostrarproductos,.mostrarproductos1").button("option","label","Products");$(".mostrarproductos,.mostrarproductos1,.mostrarproductos2").css("color","")}});$("#tabladetalle").wijdialog({autoOpen:false,hide:"clip",width:900,position:"top",buttons:{Accept:function(){$(this).wijdialog("close")}},close:function(A){$("#mostrartabla,#mostrartablafestivo,#mostrartabla1").button("option","label","Show table").css("color","")}});$("#dialogovacaciones").wijdialog({autoOpen:false,hide:"clip",width:900,buttons:{Cancel:function(){$(this).wijdialog("close")}}});$("#dialogoconvertirventa").wijdialog({autoOpen:false,show:"clip",hide:"clip",width:650,height:350,buttons:{Aceptar:function(){if($(".entregado1 input").is(":visible")){if(parseFloat($(".entregado1 input").val())<$("#totaldialogo").html()||isNaN($(".entregado1 input").val())||$(".entregado1 input").val()==""){$(this).wijdialog("close");$("#error").wijdialog("open")}else{if($("#preguntafacturareserva").is(":checked")){$.ajax({url:Routing.generate("convertiru"),data:{formapago:$("#formapagoreserva").val(),reserva:$("#idreserva").html(),totalpago:parseFloat($(".entregado1 input").val())},success:function(A){$.fancybox.open({href:Routing.generate("facturapdf",{id:A}),type:"iframe",afterClose:function(){window.location=Routing.generate("listaventa")}})}})}else{$.ajax({url:Routing.generate("convertiru"),data:{formapago:$("#formapagoreserva").val(),reserva:$("#idreserva").html(),totalpago:parseFloat($(".entregado1 input").val())}});$(".prueba").css("display","none");$("#ajax-loader").show("fade");setTimeout(function(){window.location=Routing.generate("listaventa")},2000)}}}else{if($("#preguntafacturareserva").is(":checked")){$.ajax({url:Routing.generate("convertiru"),data:{formapago:$("#formapagoreserva").val(),reserva:$("#idreserva").html(),totalpago:0},success:function(A){$.fancybox.open({href:Routing.generate("facturapdf",{id:A}),type:"iframe",afterClose:function(){window.location=Routing.generate("listaventa")}})}})}else{$(this).wijdialog("close");$.ajax({url:Routing.generate("convertiru"),data:{formapago:$("#formapagoreserva").val(),reserva:$("#idreserva").html(),totalpago:0}});$(".prueba").css("display","none");$("#ajax-loader").show("fade");setTimeout(function(){window.location=Routing.generate("listaventa")},2000)}}$(this).wijdialog("close")},Cancelar:function(){$(this).wijdialog("close")}}});$("#calendardialogedit").wijdialog({autoOpen:false,show:"Scale",hide:"explode",resizable:false,buttons:{Delete:function(){var A=$("#calendardialogedit").data("idcita");$("#calendar").fullCalendar("removeEvents",A);var B=Routing.generate("borrarcita",{id:A});$.ajax({url:B});$(this).wijdialog("close");tablacitas.fnReloadAjax();return false},Cancel:function(){$(this).wijdialog("close");return false}}});$("#borrarfestivo").wijdialog({autoOpen:false,show:"Scale",hide:"explode",resizable:false,buttons:{Delete:function(){var B=$("#borrarfestivo").data("idfestivo");$("#calendar1").fullCalendar("removeEvents",B);var A=Routing.generate("borrarfestivo",{id:B});$.ajax({url:A});$(this).wijdialog("close");tablafestivos.fnReloadAjax();return false},Cancel:function(){$(this).wijdialog("close");return false}}});$("#borrarpermiso").wijdialog({autoOpen:false,show:"Scale",hide:"explode",resizable:false,buttons:{Delete:function(){var A=$("#borrarpermiso").data("idpermiso");$("#vacaciones").fullCalendar("removeEvents",A);$.ajax({url:Routing.generate("borrarpermiso",{id:A})});$(this).wijdialog("close");return false},Cancel:function(){$(this).wijdialog("close");return false}}});$("#borrarpermisos").wijdialog({autoOpen:false,show:"Scale",hide:"explode",resizable:false,buttons:{Delete:function(){var A=$("#borrarpermisos").data("idpermiso");$.ajax({url:Routing.generate("borrarpermiso",{id:A})});setTimeout(function(){$("#vacaciones").fullCalendar("refetchEvents");tablapermisos.fnReloadAjax()},1000);$(this).wijdialog("close");return false},Cancel:function(){$(this).wijdialog("close");return false}}});$("#festivos").wijdialog({autoOpen:false,show:"Scale",hide:"explode",resizable:false,buttons:{Yes:function(){var A=$("#festivos").data("fecha");$.ajax({data:{fecha:A},url:Routing.generate("comprobarfestivo"),success:function(B){if(B==1){$.ajax({data:{fecha:A},url:Routing.generate("guardarfestivo")});setTimeout(function(){$("#calendar1").fullCalendar("refetchEvents");tablafestivos.fnReloadAjax()},1000)}else{$("#errorfestivo").wijdialog("open")}}});$(this).wijdialog("close");return false},No:function(){$(this).wijdialog("close");return false}}});$("#ok").wijdialog({autoOpen:false,show:"Scale",hide:"explode",resizable:false,buttons:{Accept:function(){$(this).wijdialog("close");return false}}});$("#confirmar").wijdialog({autoOpen:false,resizable:false,open:function(B,C){var D=$("#formapago").find("option:selected").val();if(D=="efectivo"){$(".entregado input").val();var A=parseFloat($(".entregado input").val())-parseFloat($("#totalventa").html());A=Math.round(A*100)/100;$(".msgentregado").html(" Should return "+A+"€ to customer.");$(".msgentregado").addClass("ui-state-highlight ui-corner-all")}},close:function(A,B){$(".msgentregado").html("");$(".msgentregado").removeClass("ui-state-highlight ui-corner-all")},buttons:{Yes:function(){var F=new Array();var C=$("td",tabla2.fnGetNodes());for(var B=0;B<parseInt(C.length);B=B+6){F.push(parseInt($(C[B]).text()));F.push(parseInt($(C[B+2]).text()))}var E=location.href;var D=E.split("/");var A=D[D.length-1];if($("#preguntafactura").is(":checked")){$(this).wijdialog("close");$.ajax({url:Routing.generate("nueva_ventau"),data:{cliente:A,productos:F,formapago:$("#formapago").val(),totalpago:parseFloat($(".entregado input").val())},success:function(G){$.fancybox.open({href:Routing.generate("facturapdf",{id:G}),type:"iframe",afterClose:function(){window.location=Routing.generate("listaventa")}})}})}else{$(this).wijdialog("close");$.ajax({url:Routing.generate("nueva_ventau"),data:{cliente:A,productos:F,formapago:$("#formapago").val(),totalpago:parseFloat($(".entregado input").val())}});$(".prueba").css("display","none");$("#ajax-loader").show("fade");setTimeout(function(){window.location=Routing.generate("listaventa")},2000)}return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmardevolver").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){var F=new Array();var E=$("td",tabladevolucion.fnGetNodes());for(var D=0;D<parseInt(E.length);D=D+7){if(parseInt($(E[D+6]).find("select").val())>0){F.push(parseInt($(E[D]).text()));F.push(parseInt($(E[D+6]).find("select").val()));F.push($(E[D+6]).find("input[type=radio]:radio:checked").val())}}var A=$("#chivatoidventa").text();var C=$("#chivatoidcliente").text();var B=$("#areatexto").val();if(F.length==0){$(this).wijdialog("close");$(".notificacion1").addClass("notificacionerror ui-state-error ui-corner-all").show();setTimeout(function(){$(".notificacion1").hide("fade")},5000)}else{if($("#preguntadocumentodevolucion").is(":checked")){$(this).wijdialog("close");$.ajax({url:Routing.generate("nueva_devolucionu"),data:{cliente:C,venta:A,productos:F,descripcion:B},success:function(G){$.fancybox.open({href:Routing.generate("documentodevolucionpdf",{id:G}),type:"iframe",afterClose:function(){window.location=Routing.generate("listadevolucion")}})}})}else{$(this).wijdialog("close");$.ajax({url:Routing.generate("nueva_devolucionu"),data:{cliente:C,venta:A,productos:F,descripcion:B}});$(".prueba").css("display","none");$("#ajax-loader").show("fade");setTimeout(function(){window.location=Routing.generate("listadevolucion")},2000)}}return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar23").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){var D=new Array();var B=$("td",tabla4.fnGetNodes());for(var C=0;C<parseInt(B.length);C=C+6){D.push(parseInt($(B[C]).text()));D.push(parseInt($(B[C+2]).text()))}var A=$("#chivatoidproveedor").text();$.ajax({url:Routing.generate("nuevo_pedidou"),data:{proveedor:A,productos:D}});$(this).wijdialog("close");$(".prueba").css("display","none");$("#ajax-loader").show("fade");setTimeout(function(){window.location=Routing.generate("listapedido")},2000);return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar8").wijdialog({autoOpen:false,resizable:false,open:function(B,C){var D=$("#formapago").find("option:selected").val();if(D=="efectivo"){$(".entregado input").val();var A=parseFloat($(".entregado input").val())-parseFloat($("#adelanto").val());A=Math.round(A*100)/100;$(".msgentregado").html(" Should return "+A+"€ to customer.");$(".msgentregado").addClass("ui-state-highlight ui-corner-all")}},close:function(A,B){$(".msgentregado").html("");$(".msgentregado").removeClass("ui-state-highlight ui-corner-all")},buttons:{Yes:function(){var F=new Array();var A=$("td",tabla4.fnGetNodes());for(var D=0;D<parseInt(A.length);D=D+6){F.push(parseInt($(A[D]).text()));F.push(parseInt($(A[D+2]).text()))}var B=location.href;var E=B.split("/");var C=E[E.length-1];if($("#preguntadocumentoreserva").is(":checked")){$(this).wijdialog("close");$.ajax({url:Routing.generate("nueva_reservau"),data:{cliente:C,productos:F,formapago:$("#formapago").val(),adelanto:$("#adelanto").val(),apartado:"no",totalpago:parseFloat($(".entregado input").val())},success:function(G){$.fancybox.open({href:Routing.generate("reservapdf",{id:G}),type:"iframe",afterClose:function(){window.location=Routing.generate("listareserva")}})}})}else{$(this).wijdialog("close");$.ajax({url:Routing.generate("nueva_reservau"),data:{cliente:C,productos:F,formapago:$("#formapago").val(),adelanto:$("#adelanto").val(),apartado:"no",totalpago:parseFloat($(".entregado input").val())}});$(".prueba").css("display","none");$("#ajax-loader").show();setTimeout(function(){window.location=Routing.generate("listareserva")},2000);return true}},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar29").wijdialog({autoOpen:false,resizable:false,open:function(B,C){var D=$("#formapago").find("option:selected").val();if(D=="efectivo"){$(".entregado input").val();var A=parseFloat($(".entregado input").val())-parseFloat($("#adelanto").val());A=Math.round(A*100)/100;$(".msgentregado").html(" Should return "+A+"€ to customer.");$(".msgentregado").addClass("ui-state-highlight ui-corner-all")}},close:function(A,B){$(".msgentregado").html("");$(".msgentregado").removeClass("ui-state-highlight ui-corner-all")},buttons:{Yes:function(){var F=new Array();var D=$("td",tabla2.fnGetNodes());for(var C=0;C<parseInt(D.length);C=C+6){F.push(parseInt($(D[C]).text()));F.push(parseInt($(D[C+2]).text()))}var A=location.href;var E=A.split("/");var B=E[E.length-1];if($("#preguntadocumentoreserva").is(":checked")){$(this).wijdialog("close");$.ajax({url:Routing.generate("nueva_reservau"),data:{cliente:B,productos:F,adelanto:$("#adelanto").val(),formapago:$("#formapago").val(),apartado:"si",totalpago:parseFloat($(".entregado input").val())},success:function(G){$.fancybox.open({href:Routing.generate("reservapdf",{id:G}),type:"iframe",afterClose:function(){window.location=Routing.generate("listaapartado")}})}})}else{$(this).wijdialog("close");$.ajax({url:Routing.generate("nueva_reservau"),data:{cliente:B,productos:F,formapago:$("#formapago").val(),adelanto:$("#adelanto").val(),apartado:"si",totalpago:parseFloat($(".entregado input").val())}});$(".prueba").css("display","none");$("#ajax-loader").show();setTimeout(function(){window.location=Routing.generate("listaapartado")},2000);return true}},Cancel:function(){$(this).wijdialog("close");return false}}});$("#mensajecontacto").wijdialog({autoOpen:false,resizable:true,height:430,width:380,buttons:{Send:function(){var A=$("#email").val();var B=$("#mensaje").val();url=Routing.generate("contacto");$.ajax({url:url,data:{email:A,mensaje:B}});$(this).wijdialog("close");return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar1").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar2").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.nuevousuario.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar3").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){document.forms.modificarusuario.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar4").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){document.forms.eliminarusuario.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar5").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){document.forms.nuevoempleado.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar25").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){document.forms.nuevomedico.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar17").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){document.forms.nuevoproveedor.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar6").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){document.forms.modificarempleado.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar26").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){document.forms.modificarmedico.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar7").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){document.forms.eliminarempleado.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar15").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.modificarproveedor.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar16").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.eliminarproveedor.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar13").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.eliminarproducto.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar14").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.modificarproducto.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar10").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.nuevoproducto.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar11").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.nuevafamilia.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar27").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.nuevoinforme.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar21").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.eliminarfamilia.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar22").wijdialog({autoOpen:false,resizable:false,buttons:{Yes:function(){$(this).wijdialog("close");document.forms.modificarfamilia.submit();return true},Cancel:function(){$(this).wijdialog("close");return false}}});$("#confirmar28").wijdialog({autoOpen:false,resizable:false,buttons:{"Try again":function(){$(this).wijdialog("close");return true},Save:function(){$(this).wijdialog("close");$.ajax({url:Routing.generate("guardararqueo"),data:{efectivocontado:$("#confirmar28").data("sum"),efectivo:$("#confirmar28").data("sum1"),boletascontadas:$("#confirmar28").data("boletas"),boletas:$("#confirmar28").data("boletas1"),confirmado:"no"}});$(".notificacion1").addClass("notificacion ui-state-highlight ui-corner-all").show();$("#validararqueo").button({disabled:true});setTimeout(function(){$(".notificacion1").hide()},5000);return false}}});$("#gusuario").live("click",function(){$("#confirmar2").wijdialog("open")});$("#gproducto").live("click",function(){$("#confirmar10").wijdialog("open")});$("#bmodificarfamilia").live("click",function(){$("#confirmar22").wijdialog("open")});$("#beliminarfamilia").live("click",function(){$("#confirmar21").wijdialog("open")});$("#bmodificarusuario").live("click",function(){$("#confirmar3").wijdialog("open")});$("#beliminarusuario").live("click",function(){$("#confirmar4").wijdialog("open")});$("#gempleado").live("click",function(){$("#confirmar5").wijdialog("open")});$("#gmedico").live("click",function(){$("#confirmar25").wijdialog("open")});$("#bmodificarempleado").live("click",function(){$("#confirmar6").wijdialog("open")});$("#bmodificarmedico").live("click",function(){$("#confirmar26").wijdialog("open")});$("#beliminarempleado").live("click",function(){$("#confirmar7").wijdialog("open")});$("#bmodificarproveedor").live("click",function(){$("#confirmar15").wijdialog("open")});$("#beliminarproveedor").live("click",function(){$("#confirmar16").wijdialog("open")});$("#beliminarproducto").live("click",function(){$("#confirmar13").wijdialog("open")});$("#bmodificarproducto").live("click",function(){$("#confirmar14").wijdialog("open")});$("#gproveedor").live("click",function(){$("#confirmar17").wijdialog("open")});$("#gfamilia").live("click",function(){$("#confirmar11").wijdialog("open")});$("#ginforme").live("click",function(){$("#confirmar27").wijdialog("open")})});