$(document).ready(function(){Highcharts.setOptions({lang:{thousandsSep:".",decimalPoint:","},global:{useUTC:false}});$("#tabs").bind("tabscreate",function(A,B){$.getJSON(Routing.generate("graficasajax",{id:1}),function(G){var F=[];var J=[];var I=[];var D=[];var H=[];var E=[];var C=[];$.each(G,function(K,L){C.push(G[K].username);F.push(G[K].nventas);J.push(G[K].nreservas);I.push(G[K].napartados);D.push(G[K].ndevoluciones);E.push(G[K].ncitas);H.push(G[K].npedidos)});chart=new Highcharts.Chart({chart:{renderTo:"container",type:"column",borderWidth:2,borderRadius:10},title:{text:"Number of operations employees"},xAxis:{categories:C},yAxis:{min:0,title:{text:"Number"}},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"left",verticalAlign:"top",x:0,y:100,floating:false,shadow:true},tooltip:{formatter:function(){return"<b>Employee:"+this.x+"</b><br/>"+this.y}},plotOptions:{column:{pointPadding:0.2,borderWidth:0}},series:[{name:"Sales",data:F,dataLabels:{enabled:true}},{name:"Returns",data:D,dataLabels:{enabled:true}},{name:"Reserves",data:J,dataLabels:{enabled:true}},{name:"Put asides",data:I,dataLabels:{enabled:true}},{name:"Orders",data:H,dataLabels:{enabled:true}},{name:"Appointments",data:E,dataLabels:{enabled:true}}],exporting:{filename:"Stats-of-employees"}})})});$("#tabs").bind("tabsselect",function(B,K){if(K.index==0){$.getJSON(Routing.generate("graficasajax",{id:1}),function(Q){var P=[];var T=[];var S=[];var N=[];var R=[];var O=[];var M=[];$.each(Q,function(U,V){M.push(Q[U].username);P.push(Q[U].nventas);T.push(Q[U].nreservas);S.push(Q[U].napartados);N.push(Q[U].ndevoluciones);O.push(Q[U].ncitas);R.push(Q[U].npedidos)});chart=new Highcharts.Chart({chart:{renderTo:"container",type:"column",borderWidth:2,borderRadius:10},title:{text:"Number of operations employees"},xAxis:{categories:M},yAxis:{min:0,title:{text:"Number"}},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"left",verticalAlign:"top",x:0,y:100,floating:false,shadow:true},tooltip:{formatter:function(){return"<b>Employee:"+this.x+"</b><br/>"+this.y}},plotOptions:{column:{pointPadding:0.2,borderWidth:0}},series:[{name:"Sales",data:P,dataLabels:{enabled:true}},{name:"Returns",data:N,dataLabels:{enabled:true}},{name:"Reserves",data:T,dataLabels:{enabled:true}},{name:"Put asides",data:S,dataLabels:{enabled:true}},{name:"Orders",data:R,dataLabels:{enabled:true}},{name:"Appointments",data:O,dataLabels:{enabled:true}}],exporting:{filename:"Stats-of-employees"}})})}if(K.index==1){var C=[],E=[],I=[],H=[],G=[],L=[],D=0,J=["ventas","reservas","apartados","devoluciones"],A=Highcharts.getOptions().colors;$.each(J,function(N,M){if(N==0){$.getJSON(Routing.generate("graficasajax",{id:M}),function(O){$.each(O,function(P,Q){E.push([Q.fecha,Q.total])});C[N]={name:"sales",data:E,marker:{enabled:true,radius:3},shadow:true};D++;if(D==J.length){F()}})}if(N==1){$.getJSON(Routing.generate("graficasajax",{id:M}),function(O){$.each(O,function(P,Q){I.push([Q.fecha,Q.total])});C[N]={name:"Reserves",data:I,marker:{enabled:true,radius:3},shadow:true};D++;if(D==J.length){F()}})}if(N==2){$.getJSON(Routing.generate("graficasajax",{id:M}),function(O){$.each(O,function(P,Q){H.push([Q.fecha,Q.total])});C[N]={name:"Put asides",data:H,marker:{enabled:true,radius:3},shadow:true};D++;if(D==J.length){F()}})}if(N==3){$.getJSON(Routing.generate("graficasajax",{id:M}),function(O){$.each(O,function(P,Q){G.push([Q.fecha,Q.total])});C[N]={name:"Returns",data:G,marker:{enabled:true,radius:3},shadow:true};D++;if(D==J.length){F()}})}});function F(){chart5=new Highcharts.StockChart({chart:{renderTo:"container1",borderWidth:2,borderRadius:10},title:{text:"Operations performed by employees"},xAxis:{type:"datetime"},yAxis:{labels:{formatter:function(){return this.value}}},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"left",verticalAlign:"top",enabled:true,x:0,y:100,floating:false,shadow:true},series:C})}}if(K.index==2){$.getJSON(Routing.generate("graficasajax",{id:2}),function(N){var M=[];$.each(N,function(O,P){M.push([P.username,P.total])});chart3=new Highcharts.Chart({chart:{renderTo:"container2",plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false,borderWidth:2,borderRadius:10},title:{text:"Percentage of sales employees"},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>: "+Math.round(this.percentage)+" %"}},plotOptions:{pie:{allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:true,color:"#000000",connectorColor:"#000000",formatter:function(){return"<b>"+this.point.name+"</b>: "+Math.round(this.percentage)+" %"}}},showInLegend:true},series:[{type:"pie",name:"Browser share",data:M}]})})}if(K.index==3){$.getJSON(Routing.generate("graficasajax",{id:3}),function(O){var N=[];var M=[];$.each(O,function(P,Q){M.push(O[P].descripcion);N.push(O[P].cantidad)});chart5=new Highcharts.Chart({chart:{renderTo:"container3",type:"column",borderWidth:2,borderRadius:10},title:{text:"Bestsellers"},xAxis:{title:{text:"Products"},categories:M},yAxis:{min:0,title:{text:"Amounts"},labels:{formatter:function(){return this.value}}},legend:{enabled:false},tooltip:{formatter:function(){return"<b>Product: "+this.x+"</b><br/>"+this.y+" unit/s"}},plotOptions:{column:{pointPadding:0.3,borderWidth:1}},series:[{name:"sales",data:N,dataLabels:{enabled:true}}],exporting:{filename:"Bestsellers"}})})}if(K.index==4){$.getJSON(Routing.generate("graficasajax",{id:2}),function(O){var N=[];var M=[];$.each(O,function(P,Q){M.push(O[P].username);N.push(O[P].total)});chart2=new Highcharts.Chart({chart:{renderTo:"container4",type:"column",borderWidth:2,borderRadius:10},title:{text:"Employee invoicing"},xAxis:{categories:M,title:{text:"Employees"}},yAxis:{min:0,title:{text:"€"},labels:{formatter:function(){return this.value}}},legend:{enabled:false},tooltip:{formatter:function(){return"<b>Employee: "+this.x+"</b><br/>"+this.y+" €"}},plotOptions:{column:{pointPadding:0.3,borderWidth:1}},series:[{name:"Sales",data:N,dataLabels:{enabled:true}}],exporting:{filename:"Employee-Turnover"}})})}if(K.index==5){var I=[];$.getJSON(Routing.generate("graficasajax",{id:4}),function(N){var M=[];$.each(N,function(O,P){M.push([P.fecha,P.total])});chart6=new Highcharts.StockChart({chart:{renderTo:"container5",borderWidth:2,borderRadius:10},rangeSelector:{selected:4},title:{text:"Total invoiced"},yAxis:{labels:{formatter:function(){return this.value}},plotLines:[{value:0,width:2,color:"silver"}]},series:[{name:"invoiced",data:M,marker:{enabled:true,radius:3},shadow:true}]})})}if(K.index==6){var I=[];$.getJSON(Routing.generate("graficasajax",{id:5}),function(N){var M=[];$.each(N,function(O,P){M.push([P.fecha,P.total])});chart7=new Highcharts.StockChart({chart:{renderTo:"container6",borderWidth:2,borderRadius:10},rangeSelector:{selected:4},title:{text:"Accumulated total invoiced"},yAxis:{labels:{formatter:function(){return this.value}},plotLines:[{value:0,width:2,color:"silver"}]},series:[{name:"Accumulated total invoiced",data:M,marker:{enabled:true,radius:3},shadow:true}]})})}if(K.index==7){var I=[];$.getJSON(Routing.generate("graficasajax",{id:6}),function(N){var M=[];$.each(N,function(O,P){M.push([P.fecha,P.total])});chart8=new Highcharts.StockChart({chart:{renderTo:"container7",borderWidth:2,borderRadius:10},rangeSelector:{selected:4},title:{text:"Benefit"},yAxis:{labels:{formatter:function(){return this.value}},plotLines:[{value:0,width:2,color:"silver"}]},series:[{name:"benefit",data:M,marker:{enabled:true,radius:3},shadow:true}]})})}if(K.index==8){var I=[];$.getJSON(Routing.generate("graficasajax",{id:7}),function(N){var M=[];$.each(N,function(O,P){M.push([P.fecha,P.total])});chart9=new Highcharts.StockChart({chart:{renderTo:"container8",borderWidth:2,borderRadius:10},rangeSelector:{selected:4},title:{text:"Total benefit accumulated"},yAxis:{labels:{formatter:function(){return Highcharts.numberFormat(this.value,0,",","")}},plotLines:[{value:0,width:2,color:"silver"}]},series:[{name:"Benefit accumulated",data:M,marker:{enabled:true,radius:3},shadow:true}]})})}if(K.index==9){$.getJSON(Routing.generate("graficasajax",{id:8}),function(O){var M=[];var P=[];var N=[];$.each(O,function(Q,R){N.push(O[Q].username);M.push(O[Q].confirmado);P.push(O[Q].noconfirmado)});chart10=new Highcharts.Chart({chart:{renderTo:"container9",type:"column",borderWidth:2,borderRadius:10},title:{text:"Cash audit of employees"},xAxis:{categories:N},yAxis:{min:0,title:{text:"Number"}},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"left",verticalAlign:"top",x:0,y:100,floating:false,shadow:true},tooltip:{formatter:function(){return"<b>Employee:"+this.x+"</b><br/>"+this.y}},plotOptions:{column:{pointPadding:0.2,borderWidth:0}},colors:["green","#FA476E"],series:[{name:"Confirmed",data:M,dataLabels:{enabled:true}},{name:"Unconfirmed",data:P,dataLabels:{enabled:true}}],exporting:{filename:"Cash-audit-of-employees"}})})}});$("#emptabs").bind("tabscreate",function(A,B){$.getJSON(Routing.generate("graficasajaxemp",{id:1}),function(E){var D=[];var C=[];$.each(E,function(F,G){C.push(E[F].tipo);D.push(E[F].cantidad)});chart=new Highcharts.Chart({chart:{renderTo:"empcontainer",type:"column"},title:{text:"Number of operations performed"},xAxis:{categories:C},yAxis:{min:0,title:{text:"Number"}},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"left",verticalAlign:"top",x:100,y:70,floating:true,shadow:true,enabled:false},tooltip:{formatter:function(){return"<b>Employee: "+this.x+"</b><br/>"+this.y}},plotOptions:{column:{point:{events:{click:function(){if(this.x==0){window.location=Routing.generate("listaventa")}if(this.x==1){window.location=Routing.generate("listadevolucion")}if(this.x==2){window.location=Routing.generate("listareserva")}if(this.x==3){window.location=Routing.generate("listaapartado")}if(this.x==4){window.location=Routing.generate("newcita")}if(this.x==5){window.location=Routing.generate("listapedido")}}}},pointPadding:0.2,borderWidth:0},series:{colorByPoint:true}},series:[{data:D,dataLabels:{enabled:true}}],exporting:{filename:"Number-of-operations-performed"}})})});$("#emptabs").bind("tabsselect",function(B,C){if(C.index==0){$.getJSON(Routing.generate("graficasajaxemp",{id:1}),function(F){var E=[];var D=[];$.each(F,function(G,H){D.push(F[G].tipo);E.push(F[G].cantidad)});chart=new Highcharts.Chart({chart:{renderTo:"empcontainer",type:"column"},title:{text:"Number of operations performed"},xAxis:{categories:D},yAxis:{min:0,title:{text:"Number"}},legend:{layout:"vertical",backgroundColor:"#FFFFFF",align:"left",verticalAlign:"top",x:100,y:70,floating:true,shadow:true,enabled:false},tooltip:{formatter:function(){return"<b>Employee: "+this.x+"</b><br/>"+this.y}},plotOptions:{column:{point:{events:{click:function(){if(this.x==0){window.location=Routing.generate("listaventa")}if(this.x==1){window.location=Routing.generate("listadevolucion")}if(this.x==2){window.location=Routing.generate("listareserva")}if(this.x==3){window.location=Routing.generate("listaapartado")}if(this.x==4){window.location=Routing.generate("newcita")}if(this.x==5){window.location=Routing.generate("listapedido")}}}},pointPadding:0.2,borderWidth:0},series:{colorByPoint:true}},series:[{data:E,dataLabels:{enabled:true}}],exporting:{filename:"Number-of-operations-performed"}})})}if(C.index==1){var A=[];$.getJSON(Routing.generate("graficasajaxemp",{id:2}),function(E){var D=[];$.each(E,function(F,G){D.push([G.fecha,G.total])});chart6=new Highcharts.StockChart({chart:{renderTo:"empcontainer1",borderWidth:2,borderRadius:10},rangeSelector:{selected:4},title:{text:"Total invoiced"},yAxis:{labels:{formatter:function(){return this.value}},plotLines:[{value:0,width:2,color:"silver"}]},series:[{name:"Invoiced",data:D,marker:{enabled:true,radius:3},shadow:true}]})})}})});