$(document).ready(function(){var A=Routing.generate("listarcitascalendario",{id:0});var B=Routing.generate("listararqueoscalendario",{idemp:0});$("#calendarioarqueo").fullCalendar({defaultView:"month",buttonText:{today:"Hoy",week:"Semana",day:"Dia"},columnFormat:{month:"dddd"},titleFormat:{week:"d[ yyyy]{ '&#8212;'[ MMM] d MMMM yyyy}",day:"dddd, d MMMM yyyy"},height:600,monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sabado"],axisFormat:"HH:mm",theme:true,height:450,defaultEventMinutes:120,weekends:false,header:{left:"prev,next today",center:"title"},eventSources:[{url:B}],eventRender:function(E,D){D.qtip({content:"Hora: "+E.hora+"<br/>Realizado por: "+E.empleado,show:{effect:function(G){$(this).slideDown(400)}}});if(E.efectivocontado!=null){var C=E.boletascontado-E.boletas;var F=E.efectivocontado-E.efectivo;F=Math.round(F*100)/100;D.find(".fc-event-title").append("<br/> Boletas: "+E.boletas+" Contadas: "+E.boletascontado+" Dif :"+C);D.find(".fc-event-title").append("<br/> Efectivo: "+E.efectivo+" Contado: "+E.efectivocontado+" Dif :"+F)}}});$("#calendar").fullCalendar({defaultView:"agendaWeek",buttonText:{today:"Hoy",week:"Semana",day:"Dia",},columnFormat:{week:"dddd d/M",day:"dddd d/M"},titleFormat:{week:"d[ yyyy]{ '&#8212;'[ MMM] d MMMM yyyy}",day:"dddd, d MMMM yyyy"},monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sabado"],axisFormat:"HH:mm",theme:true,height:9999999999,allDaySlot:false,firstHour:9,droppable:true,editable:true,disableResizing:true,defaultEventMinutes:30,minTime:9,maxTime:20,weekends:false,header:{left:"prev,next today",center:"title",right:"agendaWeek,agendaDay"},eventSources:[{url:A},{url:Routing.generate("festivosajax"),color:"red"}],eventDrop:function(C,F,J,R,H,K,M,N){var Q=new Date();if(C.start<Q){$("#erroranterior").wijdialog("open");setTimeout(function(){$(".qtip").remove()},1000);$("#calendar").fullCalendar("refetchEvents")}else{var G,E;date=C.start;var D=date.getMonth()+1;var I=date.getDate();var L=date.getFullYear();var P=date.toLocaleTimeString().toLowerCase().replace(/:\d\d ([ap]m) .+$/," $1");var O=I+"-"+D+"-"+L+" "+P;$.ajax({data:{fecha:O},url:Routing.generate("comprobarcitafestivo"),success:function(S){if(S==1){$.getJSON(Routing.generate("obtenerdatoscita"),{citaid:C.id},function(T){$.each(T,function(U,V){G=T[U].cliente;E=T[U].medico;$.ajax({data:{fecha:O,medico:E,cliente:G},url:Routing.generate("comprobarcita"),success:function(W){if(W==1){$.ajax({data:{fecha:O,medico:E,},url:Routing.generate("comprobarmedico1"),success:function(X){if(X==1){$.ajax({data:{fecha:O,idcita:C.id},url:Routing.generate("modificarcita")});setTimeout(function(){$("#calendar").fullCalendar("refetchEvents");tablacitas.fnReloadAjax()},1000)}else{$("#errorcita").wijdialog("open");$("#calendar").fullCalendar("refetchEvents")}}})}else{$("#errorcita").wijdialog("open");$("#calendar").fullCalendar("refetchEvents")}$(".qtip").remove()}})})})}else{$("#calendar").fullCalendar("refetchEvents");$(".qtip").remove()}}})}},eventRender:function(D,C){if(D.empleado!=null){if(D.color=="black"){C.draggable({disabled:true})}C.qtip({content:D.fecha+"<br/>Realizada por: "+D.empleado,show:{effect:function(E){$(this).slideDown(400)}}});C.find(".fc-event-title").append(" "+D.apellido1+"<br/>"+D.contacto)}},dayClick:function(C,L,F,H){var K=new Date();if(C<K){$("#erroranterior").wijdialog("open")}else{var D=C.getMonth()+1;var E=C.getDate();var G=C.getFullYear();var J=C.toLocaleTimeString().toLowerCase().replace(/:\d\d ([ap]m) .+$/," $1");var I=G+"-"+D+"-"+E+" "+J;$("#dialogonuevacita").data("fecha",I);$("#fechadialogo").html("Fecha: "+E+"/"+D+"/"+G+" "+J);$.ajax({data:{fecha:I},url:Routing.generate("comprobarcitafestivo"),success:function(M){if(M==1){$(".selectmedico").remove();$.getJSON(Routing.generate("comprobarmedico"),{fecha:I},function(N){$.each(N,function(O,P){$("#seleccionmedico").append("<option class='selectmedico' value='"+N[O].id+"'>"+N[O].nombre+"</option>")})});$("#dialogonuevacita").wijdialog("open");$(".th").click()}}})}},eventClick:function(E,D,C){if(E.title!="Festivo"&&E.color!="black"){$("#calendardialogedit").data("idcita",E.id);$("#calendardialogedit").wijdialog("open")}if(E.color=="black"){$.fancybox.open({href:Routing.generate("informepdf",{id:E.informe}),type:"iframe"})}}});$(".calendar").fullCalendar("option","aspectRatio",1.8);$("#calendar1").fullCalendar({defaultView:"month",buttonText:{today:"Hoy",week:"Semana",day:"Dia"},columnFormat:{month:"dddd"},titleFormat:{week:"d[ yyyy]{ '&#8212;'[ MMM] d MMMM yyyy}",day:"dddd, d MMMM yyyy"},height:600,monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sabado"],axisFormat:"HH:mm",theme:true,height:450,defaultEventMinutes:120,weekends:false,header:{left:"prev,next today",center:"title"},events:Routing.generate("festivosajax"),eventColor:"red",dayClick:function(C,L,G,I){var E=0;var D=C.getMonth()+1;var F=C.getDate();var H=C.getFullYear();var K=C.toLocaleTimeString().toLowerCase().replace(/:\d\d ([ap]m) .+$/," $1");var J=H+"-"+D+"-"+F+" 09:00:00";$("#festivos").data("fecha",J);$("#festivos").wijdialog("open")},eventClick:function(E,D,C){$("#borrarfestivo").data("idfestivo",E.id);$("#borrarfestivo").wijdialog("open")}});$("#calendar1").fullCalendar("option","aspectRatio",1.8);$("#calendar2").fullCalendar({defaultView:"agendaWeek",buttonText:{today:"Hoy",week:"Semana",day:"Dia"},columnFormat:{week:"dddd d/M",day:"dddd d/M"},titleFormat:{week:"d[ yyyy]{ '&#8212;'[ MMM] d MMMM yyyy}",day:"dddd, d MMMM yyyy"},monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sabado"],axisFormat:"HH:mm",theme:true,height:600,allDaySlot:false,firstHour:9,defaultEventMinutes:30,minTime:9,maxTime:20,weekends:false,header:{left:"prev,next today",center:"title",right:"agendaWeek,agendaDay"},eventSources:[{url:Routing.generate("listarcitascalendario",{id:$("#medicoinforme").text()})},{url:Routing.generate("festivosajax"),color:"red",}],eventRender:function(D,C){if(D.empleado!=null){C.qtip({content:D.fecha+"<br/>Realizada por: "+D.empleado,show:{effect:function(E){$(this).slideDown(400)}}});C.find(".fc-event-title").append(" "+D.apellido1+"<br/>"+D.contacto)}},eventClick:function(F,D,C){if(F.informe=="NO"){var E=Routing.generate("informe_new",{id:F.id,id1:F.id});window.location=E}else{$.fancybox.open({href:Routing.generate("informepdf",{id:F.informe}),type:"iframe"})}}});$("#calendar2").fullCalendar("option","aspectRatio",1.8);$("#vacaciones").fullCalendar({defaultView:"month",buttonText:{today:"Hoy",week:"Semana",day:"Dia"},columnFormat:{week:"dddd d/M",day:"dddd d/M",month:"dddd"},titleFormat:{week:"d[ yyyy]{ '&#8212;'[ MMM] d MMMM yyyy}",day:"dddd, d MMMM yyyy"},monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sabado"],axisFormat:"HH:mm",theme:true,height:600,firstDay:1,allDaySlot:false,editable:true,droppable:true,header:{left:"prev,next today",center:"title"},eventSources:[{url:Routing.generate("listarpermisoscalendario"),},{url:Routing.generate("festivosajax"),color:"red",}],drop:function(D,M,H,J){var F=$(this).data("eventObject");var C=$.extend({},F);C.start=D;C.allDay=M;$(this).effect("pulsate");var E=D.getMonth()+1;var G=D.getDate();var I=D.getFullYear();var L=D.toLocaleTimeString().toLowerCase().replace(/:\d\d ([ap]m) .+$/," $1");var K=I+"-"+E+"-"+G+" 09:00:00";$.ajax({data:{fecha:K,empleado:C.title,tipo:C.tipo,fin:"null",daydelta:"no",chivato:"no"},url:Routing.generate("comprobarpermiso"),success:function(N){if(N==1){$.ajax({url:Routing.generate("guardarpermiso"),data:{empleado:C.title,tipo:C.tipo,inicio:K,fin:"null"}});setTimeout(function(){$("#vacaciones").fullCalendar("refetchEvents")},1000)}else{if(N==2){alert("El empleado ya tiene ese tipo de vacaciones en este año")}else{alert("Error el empleado tiene un permiso en esa fecha")}}}})},eventDrop:function(C,D,F,K,E,G,H,I){var J=C.end;if(C.end==null){J="null"}$.ajax({data:{fecha:C.start,fin:J,empleado:C.title,tipo:C.tipo,daydelta:"no",chivato:"si"},url:Routing.generate("comprobarpermiso"),success:function(L){if(L==1){$.ajax({url:Routing.generate("borrarpermiso",{id:C.id})});$.ajax({url:Routing.generate("guardarpermiso"),data:{empleado:C.title,tipo:C.tipo,inicio:C.start,fin:J}})}else{alert("Error el empleado tiene un permiso en esa fecha")}}});setTimeout(function(){$("#vacaciones").fullCalendar("refetchEvents")},1000)},eventResize:function(C,D,F,K,E,G,H,I){var J=C.end;if(C.end==null){J="null"}if(D>0){$.ajax({data:{fecha:C.start,fin:J,empleado:C.title,tipo:C.tipo,daydelta:D-1,chivato:"no"},url:Routing.generate("comprobarpermiso"),success:function(L){if(L==1){$.ajax({url:Routing.generate("borrarpermiso",{id:C.id})});$.ajax({url:Routing.generate("guardarpermiso"),data:{empleado:C.title,tipo:C.tipo,inicio:C.start,fin:J}})}else{alert("Error el empleado tiene un permiso en esa fecha")}}});setTimeout(function(){$("#vacaciones").fullCalendar("refetchEvents")},1000)}else{$.ajax({url:Routing.generate("borrarpermiso",{id:C.id})});$.ajax({url:Routing.generate("guardarpermiso"),data:{empleado:C.title,tipo:C.tipo,inicio:C.start,fin:J}})}},eventClick:function(E,D,C){if(E.title!="Festivo"){$("#borrarpermiso").data("idpermiso",E.id);$("#borrarpermiso").wijdialog("open")}}});$("#vacaciones").fullCalendar("option","aspectRatio",1.8);$("#select1").change(function(){$("#calendar").fullCalendar("removeEventSource",A);A=Routing.generate("listarcitascalendario",{id:$("#select1").val()});$("#calendar").fullCalendar("addEventSource",A);$("#calendar").fullCalendar("refetchEvents")});$("#calendarioemparqueo").change(function(){$("#calendarioarqueo").fullCalendar("removeEventSource",B);B=Routing.generate("listararqueoscalendario",{idemp:$("#calendarioemparqueo").val()});$("#calendarioarqueo").fullCalendar("addEventSource",B);$("#calendarioarqueo").fullCalendar("refetchEvents")});$(".seleccionparacita").live("click",function(){var D=$("td",this.parentNode.parentNode);var E=$(D[0]).text();var C=$("#dialogonuevacita").data("fecha");$.ajax({data:{fecha:C,medico:$("#seleccionmedico").val(),cliente:E},url:Routing.generate("comprobarcita"),success:function(F){if(F==1){$("#ajax-loader").show();$.ajax({data:{fecha:C,medico:$("#seleccionmedico").val(),cliente:E},url:Routing.generate("guardarcita")});setTimeout(function(){$("#calendar").fullCalendar("refetchEvents");$("#dialogonuevacita").wijdialog("close");$("#ajax-loader").hide();tablacitas.fnReloadAjax()},1000)}else{$("#errorcita").wijdialog("open")}}})});$("div.invierno, div.verano, div.baja").each(function(){var C={title:$.trim($(this).text()),color:$(this).attr("id"),tipo:$(this).attr("class")};$(this).data("eventObject",C);$(this).draggable({zIndex:999,revert:true,revertDuration:0})});$(".botoninvierno").live("click",function(){$("#borrarpermisos").data("idpermiso","invierno");$("#borrarpermisos").wijdialog("open")});$(".botonverano").live("click",function(){$("#borrarpermisos").data("idpermiso","verano");$("#borrarpermisos").wijdialog("open")});$(".botonbaja").live("click",function(){$("#borrarpermisos").data("idpermiso","baja");$("#borrarpermisos").wijdialog("open")})});
$(document).ready(function(){$("#mostrartabla").live("click",function(){$("#tabladetalle").wijdialog("open");if($(this).text()=="Ocultar tabla"){$("#tabladetalle").wijdialog("close");$(this).button("option","label","Mostrar tabla");$(this).css("color","");$("#tablacitasdiv").hide()}else{tablacitas.fnReloadAjax();$(this).button("option","label","Ocultar tabla");$(this).css("color","red");$("#tablacitasdiv").css("display","block");$(".th").click();var A=TableTools.fnGetInstance("tablacitas");A.fnResizeButtons()}});$("#mostrartablafestivo").live("click",function(){$("#tabladetalle").wijdialog({width:500});$("#tabladetalle").wijdialog("open");if($(this).text()=="Ocultar tabla"){$("#tabladetalle").wijdialog("close");$(this).button("option","label","Mostrar tabla");$(this).css("color","");$("#tablafestivosdiv").hide()}else{tablafestivos.fnReloadAjax();$(this).button("option","label","Ocultar tabla");$(this).css("color","red");$("#tablafestivosdiv").css("display","block");$(".th").click();var A=TableTools.fnGetInstance("tablafestivos");A.fnResizeButtons()}});$("#btablapermiso").live("click",function(){if($(this).text()=="Ocultar tabla"){$(this).button("option","label","Mostrar tabla");$(this).css("color","");$("#vacaciones").show();$("#vacaciones").fullCalendar("refetchEvents");$("#tablapermisosdiv").hide()}else{tablapermisos.fnReloadAjax();$(this).button("option","label","Ocultar tabla");$(this).css("color","red");$("#vacaciones").hide();$("#tablapermisosdiv").show();$("#tablapermisosdiv").css("display","block");$(".th").click();var A=TableTools.fnGetInstance("tablapermisos");A.fnResizeButtons()}});$("#mostrartabla1").live("click",function(){$("#tabladetalle").wijdialog("open");if($(this).text()=="Ocultar tabla"){$("#tabladetalle").wijdialog("close");$(this).button("option","label","Mostrar tabla");$(this).css("color","");$("#tablaarqueos").hide();$(".select_filter").wijdropdown("refresh")}else{$(this).button("option","label","Ocultar tabla");$(this).css("color","red");$("#tablaarqueos").show();$(".select_filter").wijdropdown("refresh");$(".th").click();var A=TableTools.fnGetInstance("tablalistaarqueo");A.fnResizeButtons()}});$(".fechas").change(function(){$("#detalles").wijdialog("open");$(".divajax1").show();$(".divajax").show();$(".divajax2").hide();var A=$("td",this.parentNode.parentNode.parentNode.parentNode);var G=$(A[0]).text();var C=$(this).val();$(".detalleventa").css("color","");$(".detalleventa").button("option","label","Detalle");$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(".apartado").css("color","");$(".reserva").css("color","");var E=$(this).val();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");$(this).val(E);$(this).wijdropdown("refresh");if(C==""){$(".divajax1").hide();$(".divajax").hide();$("#detalles").wijdialog("close")}else{$(".divajax span").html("Productos de la venta: "+G);var D=Routing.generate("facturapdf",{id:G});$(".divajax .id1").html("<a class='fancybox botondocumento' href="+D+">Documento</a>");$(".divajax1 span").html("Productos de la devolución: "+C);var D=Routing.generate("documentodevolucionpdf",{id:C});$(".divajax1 .id1").html("<a class='fancybox botondocumento' href="+D+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var B=Routing.generate("productosventa",{operacionid:G});productosventa.fnReloadAjax(B);var F=Routing.generate("productosdevolucion",{operacionid:C});productosdevolucion.fnReloadAjax(F)}});$(".detallepedido").live("click",function(){$("#detalles").wijdialog("open");$(".divajax1 ,.divajax2, .divajax").hide();if($(this).text()=="Ocultar"){$("#detalles").wijdialog("close");$(".divajaxpedido").hide();$(this).button("option","label","Detalle");$(this).css("color","")}else{$(".divajaxpedido").show();$(".divajaxpedido").css("color","");$(this).css("color","red");var D=$(this).attr("id");if(D==null){var A=$("td",this.parentNode.parentNode);D=$(A[0]).text();info="Productos del pedido: "+D+" Fecha: "+$(A[2]).text()+" Total: "+$(A[4]).text()}else{var A=$("td",this.parentNode.parentNode);info="Productos del pedido: "+D}var C=Routing.generate("productospedido",{id:D});productospedido.fnReloadAjax(C);var A=$("td",this.parentNode.parentNode);$(".id").html(info);var B=Routing.generate("pedidopdf",{id:D});$(".id1").html("<a class='fancybox botondocumento' href="+B+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});$(".detallepedido, .detalleventa, .detallereserva, .detalledevolucion").button("option","label","Detalle");$(".detallepedido, .detalleventa, .detallereserva, .detalledevolucion").css("color","");$(this).css("color","red");$(this).button("option","label","Ocultar")}});$(".detalleventa").live("click",function(){$("#detalles").wijdialog("open");$(".divajax1 ,.divajax2, .divajaxpedido").hide();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");var A=$("td",this.parentNode.parentNode);if($(this).text()=="Ocultar"){$("#detalles").wijdialog("close");$(".divajax,.divajax1,.divajax2").hide();$(".detalleventa, .detallereserva").button("option","label","Detalle");$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(this).css("color","")}else{$(".divajax").show();$(".detalleventa, .detallereserva, .detalledevolucion, .detallepedido").css("color","");$(".detalleventa, .detallereserva, .detalledevolucion, .detallepedido").button("option","label","Detalle");$(this).css("color","red");var D=$(this).attr("id");if(D==null){var A=$("td",this.parentNode.parentNode);D=$(A[0]).text();info="Productos de la venta: "+D+" Fecha: "+$(A[3]).text()+" Total: "+$(A[4]).text()}else{var A=$("td",this.parentNode.parentNode);info="Productos de la venta: "+D}$(".id").html(info);var B=Routing.generate("facturapdf",{id:D});$(".id1").html("<a class='fancybox botondocumento' href="+B+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var C=Routing.generate("productosventa",{operacionid:D});productosventa.fnReloadAjax(C);$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(this).button("option","label","Ocultar")}});$(".detallereserva").live("click",function(){$("#detalles").wijdialog("open");$(".divajax1,.divajax, .divajaxpedido").hide();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");if($(this).text()=="Ocultar"){$("#detalles").wijdialog("close");$(".divajax,.divajax1,.divajax2").hide();$(".detalleventa, .detallereserva").button("option","label","Detalle");$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(this).css("color","")}else{$(".divajax2").show();$(".detalleventa, .detallereserva, .detalledevolucion").css("color","");$(".detalleventa, .detallereserva, .detalledevolucion").button("option","label","Detalle");$(this).css("color","red");var D=$(this).attr("id");if(D==null){var A=$("td",this.parentNode.parentNode);D=$(A[0]).text();info="Productos de reserva/apartado: "+D+" Fecha: "+$(A[3]).text()+" Total: "+$(A[4]).text()}else{var A=$("td",this.parentNode.parentNode);info="Productos de reserva/apartado: "+D}$(".id").html(info);var B=Routing.generate("reservapdf",{id:D});$(".id1").html("<a class='fancybox botondocumento' href="+B+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var C=Routing.generate("productosreserva",{operacionid:D});productosreserva.fnReloadAjax(C);$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(this).button("option","label","Ocultar")}});$(".detalledevolucion").live("click",function(){$("#detalles").wijdialog("open");$(".divajax2,.divajaxpedido").hide();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");if($(this).text()=="Ocultar"){$("#detalles").wijdialog("close");$(".divajax,.divajax1,.divajax2").hide();$(this).button("option","label","Detalle");$(this).css("color","")}else{$(".detalleventa, .detallereserva, .detalledevolucion, .detallepedido").css("color","");$(".detalleventa, .detallereserva, .detalledevolucion, .detallepedido").button("option","label","Detalle");$(this).css("color","red");var E=$(this).attr("id");if(E==null){$(".divajax1,.divajax").show();var A=$("td",this.parentNode.parentNode);E=$(A[0]).text();$(".divajax .id").html("Productos de la venta: "+$(this).attr("class").split(" ")[0]);$(".divajax1 .id").html("Productos de la devolución: "+E+" Fecha:"+$(A[3]).text()+" Total:"+$(A[4]).text());var C=Routing.generate("facturapdf",{id:$(this).attr("class").split(" ")[0]});$(".divajax .id1").html("<a class='fancybox botondocumento' href="+C+">Documento</a>");var C=Routing.generate("documentodevolucionpdf",{id:E});$(".divajax1 .id1").html("<a class='fancybox botondocumento' href="+C+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var B=Routing.generate("productosventa",{operacionid:$(this).attr("class").split(" ")[0]});productosventa.fnReloadAjax(B);var D=Routing.generate("productosdevolucion",{operacionid:E});productosdevolucion.fnReloadAjax(D);$(".detalledevolucion").button("option","label","Detalle");$(this).button("option","label","Ocultar")}else{var A=$("td",this.parentNode.parentNode);$(".divajax1").show();$(".divajax").hide();$(".id").html("Productos de la devolución: "+E);var C=Routing.generate("documentodevolucionpdf",{id:E});$(".divajax1 .id1").html("<a class='fancybox botondocumento' href="+C+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var D=Routing.generate("productosdevolucion",{operacionid:E});productosdevolucion.fnReloadAjax(D);$(".detalledevolucion").button("option","label","Detalle");$(this).button("option","label","Ocultar")}}});$(".mostrarproductos").live("click",function(){$("#detalles1").wijdialog("open");if($(this).text()=="Ocultar"){$("#detalles1").wijdialog("close");$(this).button("option","label","Productos");$(this).css("color","")}else{$(".mostrarproductos").css("color","");$(this).css("color","red");var B=$(this).attr("id");var A=$("td",this.parentNode.parentNode);$(".id").html("Productos de la familia: "+$(A[0]).text());var C=Routing.generate("ajaxproductos",{idfamilia:B});ajaxproductos.fnReloadAjax(C);$(".mostrarproductos").button("option","label","Productos");$(this).button("option","label","Ocultar")}});$(".mostrarproductos1").live("click",function(){$(".divproductosreservados").hide();$(".divproductos").show();$("#detalles1").wijdialog("open");if($(this).text()=="Ocultar"){$("#detalles1").wijdialog("close");$(this).button("option","label","Productos");$(this).css("color","")}else{$(".mostrarproductos1").css("color","");$(this).css("color","red");var A=$("td",this.parentNode.parentNode);nombre=$(A[0]).text();$(".id").html("Productos del proveedor: "+nombre);var B=$(this).attr("id");var C=Routing.generate("ajaxproductos1",{idproveedor:B});ajaxproductos.fnReloadAjax(C);$(".mostrarproductos1").button("option","label","Productos");$(".mostrarproductos2").button("option","label","Reservados");$(".mostrarproductos2").css("color","");$(this).button("option","label","Ocultar")}});$(".mostrarproductos2").live("click",function(){$(".divproductos").hide();$(".divproductosreservados").show();$("#detalles1").wijdialog("open");if($(this).text()=="Ocultar"){$("#detalles1").wijdialog("close");$(this).button("option","label","Reservados");$(this).css("color","")}else{$(".mostrarproductos2").css("color","");$(this).css("color","red");var A=$("td",this.parentNode.parentNode);nombre=$(A[0]).text();$(".id").html("Productos reservados al proveedor: "+nombre);var B=$(this).attr("id");var C=Routing.generate("ajaxproductos2",{idproveedor:B});ajaxproductosreservados.fnReloadAjax(C);$(".mostrarproductos1").button("option","label","Productos");$(".mostrarproductos1").css("color","");$(".mostrarproductos2").button("option","label","Reservados");$(this).button("option","label","Ocultar")}})});
(function(A){A.fn.columnFilter=function(D){var B,T,J,H;var V="from {from} to {to}";var C=new Array();var G=new Array();var U=null;var S=function(){};function W(X,a,e,h,f){if(typeof a=="undefined"){return new Array()}if(typeof e=="undefined"){e=true}if(typeof h=="undefined"){h=true}if(typeof f=="undefined"){f=true}var m;if(h==true){m=X.aiDisplay}else{m=X.aiDisplayMaster}var l=new Array();for(var Z=0,d=m.length;Z<d;Z++){var b=m[Z];var Y=Q.fnGetData(b);var g=Y[a];if(f==true&&g.length==0){continue}else{if(e==true&&jQuery.inArray(g,l)>-1){continue}else{l.push(g)}}}return l.sort()}function R(X){if(I.bUseColVis){return X}else{return Q.fnSettings().oApi._fnVisibleToColumnIndex(Q.fnSettings(),X)}}function L(g,f,h,Y,c,i){var Z="text_filter";if(Y){Z="number_filter"}J=J.replace(/(^\s*)|(\s*$)/g,"");var a=g.fnSettings().aoPreSearchCols[T].sSearch;var X="search_init ";var b=J;if(a!=""&&a!="^"){if(Y&&a.charAt(0)=="^"){b=a.substr(1)}else{b=a}X=""}var e=A('<input type="text" class="'+X+Z+'" value="'+b+'"/>');if(i!=undefined&&i!=-1){e.attr("maxlength",i)}H.html(e);if(Y){H.wrapInner('<span class="filter_column filter_number" />')}else{H.wrapInner('<span class="filter_column filter_text" />')}B[T]=J;var d=T;if(Y&&!g.fnSettings().oFeatures.bServerSide){e.keyup(function(){g.fnFilter("^"+this.value,R(d),true,false);S()})}else{e.keyup(function(){if(g.fnSettings().oFeatures.bServerSide&&c!=0){var l=g.fnSettings().aoPreSearchCols[d].sSearch;var m=A(this).data("dt-iLastFilterLength");if(typeof m=="undefined"){m=0}var n=this.value.length;if(Math.abs(n-m)<c){return}else{A(this).data("dt-iLastFilterLength",n)}}g.fnFilter(this.value,R(d),f,h);S()})}e.focus(function(){if(A(this).hasClass("search_init")){A(this).removeClass("search_init");this.value=""}});e.blur(function(){if(this.value==""){A(this).addClass("search_init");this.value=B[d]}})}function F(X){H.html(M(0));var a=X.attr("id")+"_range_from_"+T;var c=A('<input type="text" class="number_range_filter" id="'+a+'" rel="'+T+'"/>');H.append(c);H.append(M(1));var Z=X.attr("id")+"_range_to_"+T;var b=A('<input type="text" class="number_range_filter" id="'+Z+'" rel="'+T+'"/>');H.append(b);H.append(M(2));H.wrapInner('<span class="filter_column filter_number_range" />');var Y=T;G.push(T);X.dataTableExt.afnFiltering.push(function(h,f,e){if(X.attr("id")!=h.sTableId){return true}if(document.getElementById(a)==null){return true}var g=document.getElementById(a).value*1;var d=document.getElementById(Z).value*1;var i=f[R(Y)]=="-"?0:f[R(Y)]*1;if(g==""&&d==""){return true}else{if(g==""&&i<=d){return true}else{if(g<=i&&""==d){return true}else{if(g<=i&&i<=d){return true}}}}return false});A("#"+a+",#"+Z,H).keyup(function(){var e=document.getElementById(a).value*1;var d=document.getElementById(Z).value*1;if(e!=0&&d!=0&&e>d){return}X.fnDraw();S()})}function N(X){var Z=V.split(/[}{]/);H.html("");var b=X.attr("id")+"_range_from_"+T;var d=A('<input type="text" class="date_range_filter" id="'+b+'" rel="'+T+'"/>');d.datepicker();var a=X.attr("id")+"_range_to_"+T;var c=A('<input type="text" class="date_range_filter" id="'+a+'" rel="'+T+'"/>');for(ti=0;ti<Z.length;ti++){if(Z[ti]==I.sDateFromToken){H.append(d)}else{if(Z[ti]==I.sDateToToken){H.append(c)}else{H.append(Z[ti])}}}H.wrapInner('<span class="filter_column filter_date_range" />');c.datepicker();var Y=T;G.push(T);X.dataTableExt.afnFiltering.push(function(m,h,g){if(X.attr("id")!=m.sTableId){return true}var f=d.datepicker("getDate");var e=c.datepicker("getDate");if(f==null&&e==null){return true}var l=null;try{if(h[R(Y)]==null||h[R(Y)]==""){return false}l=A.datepicker.parseDate(A.datepicker.regional[""].dateFormat,h[R(Y)])}catch(i){return false}if(l==null){return false}if(f==null&&l<=e){return true}else{if(f<=l&&e==null){return true}else{if(f<=l&&l<=e){return true}}}return false});A("#"+b+",#"+a,H).change(function(){X.fnDraw();S()})}function O(l,b,f,Y,m,h,a){if(b==null){b=W(l.fnSettings(),f,true,false,true)}var g=f;var e=l.fnSettings().aoPreSearchCols[T].sSearch;if(e==null||e==""){e=a}var X='<select class="search_init select_filter"><option value="" class="search_init">'+m+"</option>";var d=0;var Z=b.length;for(d=0;d<Z;d++){if(typeof(b[d])!="object"){var c="";if(escape(b[d])==e||escape(b[d])==escape(e)){c="selected "}X+="<option "+c+' value="'+escape(b[d])+'">'+b[d]+"</option>"}else{var c="";if(h){if(b[d].value==e){c="selected "}X+="<option "+c+'value="'+b[d].value+'">'+b[d].label+"</option>"}else{if(escape(b[d].value)==e){c="selected "}X+="<option "+c+'value="'+escape(b[d].value)+'">'+b[d].label+"</option>"}}}var i=A(X+"</select>");Y.html(i);Y.wrapInner('<span class="filter_column filter_select" />');i.change(function(){if(A(this).val()!=""){A(this).removeClass("search_init")}else{A(this).addClass("search_init")}if(h){l.fnFilter(A(this).val(),f,h)}else{l.fnFilter(unescape(A(this).val()),f)}S()});if(e!=null&&e!=""){l.fnFilter(unescape(e),f)}}function E(X,Y,Z,b){var a=X.fnSettings();if(Y==null&&a.sAjaxSource!=""&&!a.oFeatures.bServerSide){a.aoDrawCallback.push({fn:(function(c,e,d){return function(){if(a.iDraw==2&&a.sAjaxSource!=null&&a.sAjaxSource!=""&&!a.oFeatures.bServerSide){return O(X,null,R(c),e,d,Z,b)}}})(T,H,J),sName:"column_filter_"+T})}O(X,Y,R(T),H,J,Z,b)}function P(n,X){if(X==null){X=W(n.fnSettings(),T,true,true,true)}var c=T;var i="",p,o=X.length;var Z=J.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("£","STERL").replace("@","AT").replace(/\s/g,"_");Z=Z.replace(/[^a-zA-Z 0-9]+/g,"");var l=J;if(I.sFilterButtonText!=null||I.sFilterButtonText!=undefined){l=I.sFilterButtonText}var q=10;var g=12;var f=Math.floor(o/g);if(o%g>0){f=f+1}var Y=100/f-2;var d=q*f;if(f==1){Y=20}var s='<div style="float:left; min-width: '+Y+'%; " >';var t="</div>";var e=n.attr("id")+Z;var b="chkBtnOpen"+e;var a=e+"-flt-toggle";i+='<button id="'+b+'" class="checkbox_filter" > '+l+"</button>";i+='<div id="'+a+'" title="'+J+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+(d)+'%; " >';i+=s;for(p=0;p<o;p++){if(p%g==0&&p!=0){i+=t+s}i+='<input class="search_init checkbox_filter" type="checkbox" id= "'+X[p]+'" name= "'+Z+'" value="'+X[p]+'" >'+X[p]+"<br/>";var h=A(i);H.html(h);H.wrapInner('<span class="filter_column filter_checkbox" />');h.change(function(){var u="";var w="|";var r=A('input:checkbox[name="'+Z+'"]:checked').size();A('input:checkbox[name="'+Z+'"]:checked').each(function(x){if((x==0&&r==1)||(x!=0&&x==r-1)){w=""}u=u.replace(/^\s+|\s+$/g,"");u=u+A(this).val()+w;w="|"});for(var v=0;v<o;v++){if(u!=""){A("#"+X[v]).removeClass("search_init")}else{A("#"+X[v]).addClass("search_init")}}n.fnFilter(u,c,true,false);S()})}A("#"+b).button();A("#"+a).dialog({autoOpen:false,hide:"blind",buttons:[{text:"Reset",click:function(){A('input:checkbox[name="'+Z+'"]:checked').each(function(r){A(this).attr("checked",false);A(this).addClass("search_init")});n.fnFilter("",c,true,false);S();return false}},{text:"Close",click:function(){A(this).dialog("close")}}]});A("#"+b).click(function(){A("#"+a).dialog("open");var r=A(this);A("#"+a).dialog("widget").position({my:"top",at:"bottom",of:r});return false});var m=S;S=function(){var r=A("#"+b);A("#"+a).dialog("widget").position({my:"top",at:"bottom",of:r});m()}}function M(X){switch(X){case 0:return V.substring(0,V.indexOf("{from}"));case 1:return V.substring(V.indexOf("{from}")+6,V.indexOf("{to}"));default:return V.substring(V.indexOf("{to}")+4)}}var Q=this;var K={sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"Desde {from} Hasta {to}",sDateFromToken:"from",sDateToToken:"to"};var I=A.extend(K,D);return this.each(function(){if(!Q.fnSettings().oFeatures.bFilter){return}B=new Array();var b=Q.fnSettings().aoFooter[0];var c=Q.fnSettings().nTFoot;var Z="tr";if(I.sPlaceHolder=="head:after"){var a=A("tr:first",Q.fnSettings().nTHead).detach();if(Q.fnSettings().bSortCellsTop){a.prependTo(A(Q.fnSettings().nTHead));b=Q.fnSettings().aoHeader[1]}else{a.appendTo(A(Q.fnSettings().nTHead));b=Q.fnSettings().aoHeader[0]}Z="tr:last";c=Q.fnSettings().nTHead}else{if(I.sPlaceHolder=="head:before"){if(Q.fnSettings().bSortCellsTop){var a=A("tr:first",Q.fnSettings().nTHead).detach();a.appendTo(A(Q.fnSettings().nTHead));b=Q.fnSettings().aoHeader[1]}else{b=Q.fnSettings().aoHeader[0]}Z="tr:first";c=Q.fnSettings().nTHead}}A(b).each(function(d){T=d;var e={type:"text",bRegex:false,bSmart:true,iMaxLenght:-1,iFilterLength:0};if(I.aoColumns!=null){if(I.aoColumns.length<T||I.aoColumns[T]==null){return}e=I.aoColumns[T]}J=A(A(this)[0].cell).text();if(e.sSelector==null){H=A(A(this)[0].cell)}else{H=A(e.sSelector);if(H.length==0){H=A(A(this)[0].cell)}}if(e!=null){if(e.sRangeFormat!=null){V=e.sRangeFormat}else{V=I.sRangeFormat}switch(e.type){case"null":break;case"number":L(Q,true,false,true,e.iFilterLength,e.iMaxLenght);break;case"select":if(e.bRegex!=true){e.bRegex=false}E(Q,e.values,e.bRegex,e.selected);break;case"number-range":F(Q);break;case"date-range":N(Q);break;case"checkbox":P(Q,e.values);break;case"text":default:bRegex=(e.bRegex==null?false:e.bRegex);bSmart=(e.bSmart==null?false:e.bSmart);L(Q,bRegex,bSmart,false,e.iFilterLength,e.iMaxLenght);break}}});for(j=0;j<G.length;j++){var Y=function(){var d=Q.attr("id");return A("#"+d+"_range_from_"+G[j]).val()+I.sRangeSeparator+A("#"+d+"_range_to_"+G[j]).val()};C.push(Y)}if(Q.fnSettings().oFeatures.bServerSide){var X=Q.fnSettings().fnServerData;Q.fnSettings().fnServerData=function(d,f,h){for(j=0;j<G.length;j++){var e=G[j];for(k=0;k<f.length;k++){if(f[k].name=="sSearch_"+e){f[k].value=C[j]()}}}f.push({name:"sRangeSeparator",value:I.sRangeSeparator});if(X!=null){try{X(d,f,h,Q.fnSettings())}catch(g){X(d,f,h)}}else{A.getJSON(d,f,function(i){h(i)})}}}})}})(jQuery);
jQuery(function(A){A.datepicker.regional[""]={closeText:"Cerrar",prevText:"&#x3c;Ant",nextText:"Sig&#x3e;",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],dayNamesShort:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","S&aacute;"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};A.datepicker.setDefaults(A.datepicker.regional[""])});
$(document).ready(function(){var A=0;$("#añadirapedido").live("click",function(){var L=$("td",this.parentNode.parentNode);var F=tablapedido.fnGetPosition(this.parentNode.parentNode);var B=$(L[0]).text();var D=$(L[1]).text();var K=parseInt($(L[2]).text());var C=parseFloat($(L[6]).text());var J=parseInt(this.parentNode.firstChild.value);var I;var H=0;if(J==0||this.parentNode.firstChild.value==""||isNaN(this.parentNode.firstChild.value)){$("#error").wijdialog("open")}else{var G=$("td",tabla4.fnGetNodes());for(var E=0;E<parseInt(G.length);E=E+6){if($(G[E]).text()==B){H=1;I=parseInt($(G[E+2]).text());tabla4.fnUpdate(I+J+" unidad/es",E/6,2);tabla4.fnUpdate((I+J)*C+" €",E/6,4);var M=$("#totalventa").val();$("#totalventa").html(M+(I+J)*C)}}if(H==0){A=J*C;A=Math.round(A*100)/100;tabla4.fnAddData([B,D,J+" unidad/es",C+" €",A+" €",'<div class="sumar1">Sumar</div><div class="restar1">Restar</div><div class="eliminar1">Eliminar</div>']);M=parseFloat($("#totalventa").html());A=M+(J)*C;A=Math.round(A*100)/100;$("#totalventa").html(A);$(".sumar1").button({icons:{primary:"ui-icon-plusthick"}});$(".restar1").button({icons:{primary:"ui-icon-minusthick"}});$(".eliminar1").button({icons:{primary:"ui-icon-trash"}})}}this.parentNode.firstChild.value=""});$("#añadirreserva").live("click",function(){var M=$("td",this.parentNode.parentNode);var G=tabla3.fnGetPosition(this.parentNode.parentNode);var C=$(M[0]).text();var E=$(M[1]).text();var L=parseInt($(M[2]).text());var B=parseInt($(M[3]).text());var D=parseFloat($(M[5]).text());var K=parseFloat(this.parentNode.firstChild.value);var J;var I=0;if(this.parentNode.firstChild.value==""||isNaN(this.parentNode.firstChild.value)||K<L){$("#error").wijdialog("open")}else{var H=$("td",tabla4.fnGetNodes());for(var F=0;F<parseInt(H.length);F=F+7){if($(H[F]).text()==C){I=1;J=parseFloat($(H[F+2]).text());A=(J+K)*D;A=Math.round(A*100)/100;tabla4.fnUpdate(J+K+" unidad/es",F/7,2);tabla4.fnUpdate(A+" €",F/7,4);tabla3.fnUpdate(J+K+" unidad/es",G,4);N=parseFloat($("#totalventa").html());A=N+(K)*D;A=Math.round(A*100)/100;$("#totalventa").html(A)}}if(I==0){tabla3.fnUpdate(B+K+" unidad/es",G,4);A=K*D;A=Math.round(A*100)/100;tabla4.fnAddData([C,E,K+" unidad/es",D+" €",A+" €",'<div class="sumarreserva">Sumar</div><div class="restarreserva">Restar</div><div class="eliminarreserva">Eliminar</div>']);var N=$("#totalventa").text();A=Math.round((parseFloat(N)+A)*100)/100;$("#totalventa").html(A);$(".sumarreserva").button({icons:{primary:"ui-icon-plusthick"}});$(".restarreserva").button({icons:{primary:"ui-icon-minusthick"}});$(".eliminarreserva").button({icons:{primary:"ui-icon-trash"}})}}this.parentNode.firstChild.value=""});$("#añadir").live("click",function(){var L=$("td",this.parentNode.parentNode);var F=tabla1.fnGetPosition(this.parentNode.parentNode);var B=$(L[0]).text();var D=$(L[1]).text();var K=parseInt($(L[2]).text());var C=parseFloat($(L[5]).text());var I=parseInt(this.parentNode.firstChild.value);var H;var G=0;if(I<=0||K<I||this.parentNode.firstChild.value==""||isNaN(this.parentNode.firstChild.value)){$("#error").wijdialog("open")}else{var J=$("td",tabla2.fnGetNodes());for(var E=0;E<parseInt(J.length);E=E+6){if($(J[E]).text()==B){G=1;H=parseInt($(J[E+2]).text());tabla2.fnUpdate(H+I+" unidad/es",E/11,2);A=(H+I)*C;A=Math.round(A*100)/100;tabla2.fnUpdate(A+" €",E/11,4);tabla1.fnUpdate(K-I+" unidad/es",F,2);M=parseFloat($("#totalventa").html());A=M+(I)*C;A=Math.round(A*100)/100;$("#totalventa").html(A)}}if(G==0){tabla1.fnUpdate(K-I+" unidad/es",F,2);A=I*C;A=Math.round(A*100)/100;tabla2.fnAddData([B,D,I+" unidad/es",C+" €",A+" €",'<div class="sumar">Sumar</div><div class="restar">Restar</div><div class="eliminar">Eliminar</div>']);var M=$("#totalventa").text();A=Math.round((parseFloat(M)+A)*100)/100;$("#totalventa").html(A);$(".sumar").button({icons:{primary:"ui-icon-plusthick"}});$(".restar").button({icons:{primary:"ui-icon-minusthick"}});$(".eliminar").button({icons:{primary:"ui-icon-trash"}})}}this.parentNode.firstChild.value=""});$(".eliminar").live("click",function(){var D=$("td",this.parentNode.parentNode);var H=parseInt($(D[2]).text());var G=parseFloat($(D[3]).text());var I=parseInt($(D[0]).text());var E=$("td",tabla1.fnGetNodes());for(var C=0;C<parseInt(E.length);C=C+8){if($(E[C]).text()==I){stock=parseInt($(E[C+2]).text());tabla1.fnUpdate(stock+H+" unidad/es",C/8,2);var F=$("#totalventa").text();A=Math.round((parseFloat(F)-H*G)*100)/100;$("#totalventa").html(A)}}var B=tabla2.fnGetPosition(this.parentNode);tabla2.fnDeleteRow(B[0])});$(".restar").live("click",function(){var E=$("td",this.parentNode.parentNode);var C=tabla2.fnGetPosition(this.parentNode.parentNode);tabla2.fnUpdate(parseInt($(E[2]).text())-1+" unidad/es",C,2);var H=parseInt($(E[0]).text());var F=$("td",tabla1.fnGetNodes());for(var D=0;D<parseInt(F.length);D=D+8){if($(F[D]).text()==H){stock=parseInt($(F[D+2]).text());tabla1.fnUpdate(stock+1+" unidad/es",D/8,2);A=parseFloat($(E[4]).text())-parseFloat($(E[3]).text());A=Math.round(A*100)/100;tabla2.fnUpdate(A+" €",C,4);var G=$("#totalventa").text();var B=parseFloat($(E[3]).text());A=Math.round((parseFloat(G)-B)*100)/100;$("#totalventa").html(A)}}if(parseInt($(E[2]).text())==0){tabla2.fnDeleteRow(C)}});$(".sumar").live("click",function(){var E=$("td",this.parentNode.parentNode);var C=tabla2.fnGetPosition(this.parentNode.parentNode);var H=parseInt($(E[0]).text());var F=$("td",tabla1.fnGetNodes());for(var D=0;D<parseInt(F.length);D=D+8){if($(F[D]).text()==H){stock=parseInt($(F[D+2]).text());if(stock>0){tabla1.fnUpdate(stock-1+" unidad/es",D/8,2);tabla2.fnUpdate(parseInt($(E[2]).text())+1+" unidad/es",C,2);A=parseFloat($(E[4]).text())+parseFloat($(E[3]).text());A=Math.round(A*100)/100;tabla2.fnUpdate(A+" €",C,4);var G=$("#totalventa").text();var B=parseFloat($(E[3]).text());A=Math.round((parseFloat(G)+B)*100)/100;$("#totalventa").html(A)}}}});$(".eliminarreserva").live("click",function(){var H=$("td",this.parentNode.parentNode);var G=parseInt($(H[2]).text());var D=parseFloat($(H[3]).text());var C=parseInt($(H[0]).text());var I=$("td",tabla3.fnGetNodes());for(var E=0;E<parseInt(I.length);E=E+8){if($(I[E]).text()==C){var B=parseInt($(I[E+3]).text());tabla3.fnUpdate(B-G+" unidad/es",E/8,4);var J=$("#totalventa").text();A=Math.round((parseFloat(J)-G*D)*100)/100;$("#totalventa").html(A)}}var F=tabla4.fnGetPosition(this.parentNode);tabla4.fnDeleteRow(F[0])});$(".restarreserva").live("click",function(){var D=$("td",this.parentNode.parentNode);var C=tabla4.fnGetPosition(this.parentNode.parentNode);tabla4.fnUpdate(parseInt($(D[2]).text())-1+" unidad/es",C,2);var H=parseInt($(D[0]).text());var E=$("td",tabla3.fnGetNodes());for(var F=0;F<parseInt(E.length);F=F+8){if($(E[F]).text()==H){stockreservado=parseInt($(E[F+3]).text());tabla3.fnUpdate(stockreservado-1+" unidad/es",F/8,4);A=parseFloat($(D[4]).text())-parseFloat($(D[3]).text());A=Math.round(A*100)/100;tabla4.fnUpdate(A+" €",C,4);var G=$("#totalventa").text();var B=parseFloat($(D[3]).text());A=Math.round((parseFloat(G)-B)*100)/100;$("#totalventa").html(A)}}if(parseInt($(D[2]).text())==0){tabla4.fnDeleteRow(C)}});$(".sumarreserva").live("click",function(){var D=$("td",this.parentNode.parentNode);var C=tabla4.fnGetPosition(this.parentNode.parentNode);tabla4.fnUpdate(parseInt($(D[2]).text())+1+" unidad/es",C,2);var H=parseInt($(D[0]).text());var E=$("td",tabla3.fnGetNodes());for(var F=0;F<parseInt(E.length);F=F+8){if($(E[F]).text()==H){stockreservado=parseInt($(E[F+3]).text());tabla3.fnUpdate(stockreservado+1+" unidad/es",F/8,4);A=parseFloat($(D[4]).text())+parseFloat($(D[3]).text());A=Math.round(A*100)/100;tabla4.fnUpdate(A+" €",C,4);var G=$("#totalventa").text();var B=parseFloat($(D[3]).text());A=Math.round((parseFloat(G)+B)*100)/100;$("#totalventa").html(A)}}});$(".eliminar1").live("click",function(){var B=tabla4.fnGetPosition(this.parentNode);tabla4.fnDeleteRow(B[0]);var C=$("td",this.parentNode.parentNode);var F=parseInt($(C[2]).text());var E=parseFloat($(C[3]).text());var D=$("#totalventa").text();A=Math.round((parseFloat(D)-F*E)*100)/100;$("#totalventa").html(A)});$(".restar1").live("click",function(){var D=$("td",this.parentNode.parentNode);var C=tabla4.fnGetPosition(this.parentNode.parentNode);tabla4.fnUpdate(parseInt($(D[2]).text())-1+" unidad/es",C,2);A=parseFloat($(D[4]).text())-parseFloat($(D[3]).text());A=Math.round(A*100)/100;tabla4.fnUpdate(A+" €",C,4);var E=$("#totalventa").text();var B=parseFloat($(D[3]).text());A=Math.round((parseFloat(E)-B)*100)/100;$("#totalventa").html(A);if(parseInt($(D[2]).text())==0){tabla4.fnDeleteRow(C)}});$(".sumar1").live("click",function(){var D=$("td",this.parentNode.parentNode);var C=tabla4.fnGetPosition(this.parentNode.parentNode);tabla4.fnUpdate(parseInt($(D[2]).text())+1+" unidad/es",C,2);A=parseFloat($(D[4]).text())+parseFloat($(D[3]).text());A=Math.round(A*100)/100;tabla4.fnUpdate(A+" €",C,4);var E=$("#totalventa").text();var B=parseFloat($(D[3]).text());A=Math.round((parseFloat(E)+B)*100)/100;$("#totalventa").html(A)})});
$(document).ready(function(){jQuery.extend(jQuery.fn.dataTableExt.oSort,{"formatted-num-pre":function(B){B=(B==="-")?0:B.replace(/[^\d\-\.]/g,"");return parseFloat(B)},"formatted-num-asc":function(C,B){return C-B},"formatted-num-desc":function(C,B){return B-C}});jQuery.extend(jQuery.fn.dataTableExt.oSort,{"date-euro-pre":function(D){if($.trim(D)!=""){var F=$.trim(D).split(" ");var C=F[1].split(":");var E=F[0].split("/");var B=(E[2]+E[1]+E[0]+C[0]+C[1]+C[2])*1}else{var B=10000000000000}return B},"date-euro-asc":function(C,B){return C-B},"date-euro-desc":function(C,B){return B-C}});TableTools.DEFAULTS.sSwfPath="bundles/miomio/js/media/swf/copy_csv_xls_pdf.swf";var A={sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sInfo:"Mostrando desde _START_ hasta _END_ de _TOTAL_ registros",sInfoEmpty:"No existen registros",sInfoFiltered:"(filtrado de un total de _MAX_ líneas)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",oPaginate:{sFirst:"Primero",sPrevious:"Anterior",sNext:"Siguiente",sLast:"Último"}};$.fn.dataTableExt.oApi.fnReloadAjax=function(G,E,H,D){if(typeof E!="undefined"&&E!=null){G.sAjaxSource=E}this.oApi._fnProcessingDisplay(G,true);var F=this;var B=G._iDisplayStart;var C=[];this.oApi._fnServerParams(G,C);G.fnServerData(G.sAjaxSource,C,function(K){F.oApi._fnClearTable(G);var I=(G.sAjaxDataProp!=="")?F.oApi._fnGetObjectDataFn(G.sAjaxDataProp)(K):K;for(var J=0;J<I.length;J++){F.oApi._fnAddData(G,I[J])}G.aiDisplay=G.aiDisplayMaster.slice();F.fnDraw();if(typeof D!="undefined"&&D===true){G._iDisplayStart=B;F.fnDraw(false)}F.oApi._fnProcessingDisplay(G,false);if(typeof H=="function"&&H!=null){H(G)}},G)};tablalistar=$(".listar").dataTable({bJQueryUI:true,sScrollY:"288px",bScrollCollapse:true,bPaginate:false,aoColumns:[{sWidth:"70px"},{sWidth:"200px"},{sWidth:"130px"},{sWidth:"130px"},{sWidth:"100px"},{sWidth:"100px"},{sWidth:"160px"},{sWidth:"160px"}],oLanguage:A});tablalog=$("#tablalog").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"350px",bScrollCollapse:true,bPaginate:false,aoColumns:[{sType:"date-euro"},null,null,{bVisible:false},null],oTableTools:{sSwfPath:"../bundles/miomio/js/media/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:"visible"},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:"visible"},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:"visible"}]},oLanguage:A});tablalog.columnFilter({bUseColVis:true,aoColumns:[null,{sSelector:"#mostrarempconexion",type:"select"},null,{sSelector:"#datepicker",type:"date-range"},{sSelector:"#mostrarconexion",type:"select"}]});tablacambios=$("#tablacambios").dataTable({bJQueryUI:true,sScrollY:"350px",sDom:'<"H"Tfr>t<"F"ip>',bPaginate:false,bScrollCollapse:true,oTableTools:{sSwfPath:"../bundles/miomio/js/media/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[1,2,3,4,5]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[1,2,3,4,5]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",mColumns:[1,2,3,4,5]}]},aoColumns:[{bVisible:false},{sType:"date-euro"},null,null,null,null,null],oLanguage:A});tablacambios.columnFilter({bUseColVis:true,aoColumns:[null,{sSelector:"#datepicker",type:"date-range"},{sSelector:"#cempleado",type:"select"},{sSelector:"#cempleado1",type:"select"},{sSelector:"#cempleado2",type:"select"},null,null]});tabla2=$("#tabla2").dataTable({bJQueryUI:true,bPaginate:true,aoColumns:[{sType:"formatted-num"},{sWidth:"30%"},{sType:"formatted-num"},{sType:"formatted-num"},{sType:"formatted-num"},{sWidth:"30%"}],oLanguage:A});tabla3=$("#tabla3").dataTable({bJQueryUI:true,sScrollY:"310px",bPaginate:false,bScrollCollapse:true,aoColumns:[null,null,{sType:"formatted-num"},{bVisible:false},{sType:"formatted-num"},{sType:"formatted-num"},{sType:"formatted-num"},{bVisible:false},{sType:"formatted-num"},{bVisible:false},{bVisible:false},{sWidth:"15%"}],oLanguage:A});tabla3.columnFilter({bUseColVis:true,aoColumns:[null,null,null,{sSelector:".numeros",type:"number-range"},null,null,null,{sSelector:".numeros1",type:"number-range"},null,{sSelector:".mostrarproductofamilia",type:"select"},{sSelector:".mostrarproductoproveedor",type:"select"},null]});tabla4=$("#tabla4").dataTable({aoColumns:[{sWidth:"5%",sType:"formatted-num"},{sWidth:"25%"},{sWidth:"15%",sType:"formatted-num"},{sWidth:"10%",sType:"formatted-num"},{sWidth:"10%",sType:"formatted-num"},{sWidth:"40%"}],bJQueryUI:true,oLanguage:A});tablaseleccion=$("#tablaseleccion").dataTable({bJQueryUI:true,sScrollY:"350px",bPaginate:false,bScrollCollapse:true,oLanguage:A});tablacitas=$("#tablacitas").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"400px",bPaginate:false,sAjaxSource:Routing.generate("listarcitas"),bScrollCollapse:true,oLanguage:A,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,4,5,6,7]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,4,5,6,7]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,4,5,6,7]}]},aoColumns:[{mDataProp:"dni"},{mDataProp:"nombre"},{mDataProp:"apellido1"},{mDataProp:"apellido2"},{mDataProp:"realizada"},{mDataProp:"medico"},{mDataProp:"fecha",sType:"date-euro"},{mDataProp:"fecha cita",sType:"date-euro"}]});tablafestivos=$("#tablafestivos").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"400px",bPaginate:false,sAjaxSource:Routing.generate("listarfestivos"),bScrollCollapse:true,oLanguage:A,oTableTools:{sSwfPath:"../bundles/miomio/js/media/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar"},{sExtends:"csv",bFooter:false,sButtonText:"Csv"},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf"}]},aoColumns:[{mDataProp:"fecha",sType:"date"}]});tablapermisos=$("#tablapermisos").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"400px",bPaginate:false,sAjaxSource:Routing.generate("listarpermisos",{id:0}),bScrollCollapse:true,oLanguage:A,oTableTools:{sSwfPath:"../bundles/miomio/js/media/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,4,5,6,7]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,4,5,6,7]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,4,5,6,7]}]},aoColumns:[{mDataProp:"dni"},{mDataProp:"username"},{mDataProp:"nombre"},{mDataProp:"apellido1"},{mDataProp:"tipo"},{mDataProp:"realizada",sType:"date-euro"},{mDataProp:"inicio",sType:"date-euro"},{mDataProp:"fin",sType:"date-euro"}]});tablapermisos1=$("#tablapermisos1").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"400px",bPaginate:false,bScrollCollapse:true,oLanguage:A,oTableTools:{sSwfPath:"../../bundles/miomio/js/media/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",sPdfMessage:"Vacaciones.",mColumns:[0,1,2,3]}]},aoColumns:[{mDataProp:"tipo"},{mDataProp:"realizada",sType:"date-euro"},{mDataProp:"inicio",sType:"date-euro"},{mDataProp:"fin",sType:"date-euro"}]});tabla1=$("#tabla1").dataTable({bJQueryUI:true,sScrollY:"310px",bPaginate:false,bScrollCollapse:true,aoColumns:[null,null,{sType:"formatted-num"},{bVisible:false},{sType:"formatted-num"},{sType:"formatted-num"},{sType:"formatted-num"},{bVisible:false},{sType:"formatted-num"},{bVisible:false},{bVisible:false},{sWidth:"20%"}],oLanguage:A});tabla1.columnFilter({bUseColVis:true,aoColumns:[null,null,null,{sSelector:".numeros1",type:"number-range"},null,null,null,{sSelector:".numeros",type:"number-range"},null,{sSelector:".mostrarproductofamilia",type:"select"},{sSelector:".mostrarproductoproveedor",type:"select"},null]});tablalistaproveedores=$("#tablalistaproveedores").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"270px",bPaginate:false,bScrollCollapse:true,oLanguage:A,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,4,5,6]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,4,5,6]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,4,5,6]}]},aoColumns:[null,null,null,null,null,null,null,{sWidth:"30%"}]});tablalistaproveedorespedido=$("#tablalistaproveedorespedido").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"450px",bPaginate:false,bScrollCollapse:true,oLanguage:A,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,4,5,6,7]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,4,5,6,7]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,4,5,6,7]}]},aoColumns:[null,null,null,null,null,null,null,null,{sWidth:"30%"}]});tablalistadevolucion=$("#tablalistadevolucion").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"250px",bPaginate:false,bScrollCollapse:true,oLanguage:A,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,5,7,8,9]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,5,7,8,9]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,5,7,8,9]}]},aoColumns:[null,null,null,{sType:"date-euro"},{bVisible:false},{sType:"formatted-num"},{bVisible:false},null,null,null,{sWidth:"20%"}]});tablalistadevolucion.columnFilter({bUseColVis:true,aoColumns:[null,null,null,null,{sSelector:"#datepicker",type:"date-range"},null,{sSelector:".numeros1",type:"number-range"},{sSelector:".mostrarempleado",type:"select"},{sSelector:".mostrarpago",type:"select"},null,null]});tablacliente=$("#tablacliente").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',bPaginate:false,sScrollY:"270px",bScrollCollapse:true,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,4,5,6,7]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,4,5,6,7]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,4,5,6,7]}]},aoColumns:[null,null,null,null,{sWidth:"20%"},null,null,null,{sWidth:"25%"}],oLanguage:A});tablalistaproductos=$("#tablalistaproductos").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',bPaginate:false,sScrollY:"300px",bScrollCollapse:true,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,4,5,6,9]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,4,5,6,9]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,4,5,6,9]}]},aoColumns:[null,null,{sType:"formatted-num"},{bVisible:false},{sType:"formatted-num"},{sType:"formatted-num"},{sType:"formatted-num"},{sType:"formatted-num"},{bVisible:false},{sType:"formatted-num"},{bVisible:false},{bVisible:false},null],oLanguage:A});tablalistaproductos.columnFilter({bUseColVis:true,aoColumns:[null,null,null,{sSelector:".numeros1",type:"number-range"},null,null,null,null,{sSelector:".numeros",type:"number-range"},null,{sSelector:".mostrarproductofamilia",type:"select"},{sSelector:".mostrarproductoproveedor",type:"select"},null]});tablaconsultaventausuario=$("#tablaconsultaventausuario").dataTable({bJQueryUI:true,sScrollY:"400px",bPaginate:false,bScrollCollapse:true,oLanguage:A});listapedido=$("#listapedido").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"400px",bPaginate:false,bScrollCollapse:true,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,4,5,6]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,4,5,6]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,4,5,6]}]},aoColumns:[{sWidth:"5%"},{sWidth:"15%"},{sWidth:"15%",sType:"date-euro"},{sWidth:"15%",sType:"date-euro"},{sWidth:"5%",sType:"formatted-num"},{sWidth:"10%"},{sWidth:"10%"},{sWidth:"25%"}],oLanguage:A});tablapedido=$("#tablapedido").dataTable({bJQueryUI:true,sScrollY:"300px",bPaginate:false,bScrollCollapse:true,aoColumns:[null,null,null,null,null,null,null,{sWidth:"20%"}],oLanguage:A});tablalistaventa=$("#tablalistaventa").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"230px",bPaginate:false,bScrollCollapse:true,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,5,7,8]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,5,7,8]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,5,7,8]}]},aoColumns:[null,null,null,{sType:"date-euro"},{bVisible:false},{sType:"formatted-num"},{bVisible:false},null,null,{sWidth:"38%"}],oLanguage:A});tablalistaventa.columnFilter({bUseColVis:true,aoColumns:[null,null,null,null,{sSelector:"#datepicker",type:"date-range"},null,{sSelector:".numeros1",type:"number-range"},{sSelector:".mostrarempleado",type:"select"},{sSelector:".mostrarpago",type:"select"},null]});tablalistaoperacion=$("#tablalistaoperacion").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"230px",bPaginate:false,bScrollCollapse:true,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,5,7,8,9]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,5,7,8,9]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,5,7,8,9]}]},aoColumns:[null,null,null,{sType:"date-euro"},{bVisible:false},{sType:"formatted-num"},{bVisible:false},null,null,null,{sWidth:"28%"}],oLanguage:A});tablalistaoperacion.columnFilter({bUseColVis:true,aoColumns:[null,null,null,null,{sSelector:"#datepicker",type:"date-range"},null,{sSelector:".numeros1",type:"number-range"},{sSelector:".mostrarempleado",type:"select"},{sSelector:".mostrarpago",type:"select"},{sSelector:".mostrartipo",type:"select"},null]});tablanewdevolucion=$("#tablanewdevolucion").dataTable({bJQueryUI:true,sScrollY:"300px",bPaginate:false,bScrollCollapse:true,aoColumns:[null,null,null,{sType:"formatted-num"},null,null,null,null],oLanguage:A});listarreserva=$("#listarreserva").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"250px",bPaginate:false,bScrollCollapse:true,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,5,7,8,9,10]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,5,7,8,9,10]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,5,7,8,9,10]}]},aoColumns:[null,null,null,{sType:"date-euro"},{bVisible:false},{sType:"formatted-num"},{bVisible:false},{sType:"formatted-num"},null,null,null,{sWidth:"25%"}],oLanguage:A});listarreserva.columnFilter({bUseColVis:true,aoColumns:[null,null,null,null,{sSelector:"#datepicker",type:"date-range"},null,{sSelector:".numeros1",type:"number-range"},null,{sSelector:".mostrarempleado",type:"select"},{sSelector:".mostrarpago",type:"select"},null,null]});listarapartado=$("#listarapartado").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"250px",bPaginate:false,bScrollCollapse:true,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,5,7,8,9]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,5,7,8,9]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,5,7,8,9]}]},aoColumns:[null,null,null,{sType:"date-euro"},{bVisible:false},{sType:"formatted-num"},{bVisible:false},{sType:"formatted-num"},null,null,{sWidth:"25%"}],oLanguage:A});listarapartado.columnFilter({bUseColVis:true,aoColumns:[null,null,null,null,{sSelector:"#datepicker",type:"date-range"},null,{sSelector:".numeros1",type:"number-range"},null,{sSelector:".mostrarempleado",type:"select"},{sSelector:".mostrarpago",type:"select"},null]});tabla5=$("#tabla5").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"650px",bPaginate:false,bScrollCollapse:true,oTableTools:{sSwfPath:"../bundles/miomio/js/media/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,4,5,6,7,8]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,4,5,6,7,8]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,4,5,6,7,8]}]},oLanguage:A});productosreserva=$("#ajaxreserva").dataTable({bProcessing:true,bJQueryUI:true,oLanguage:A,aoColumns:[{mDataProp:"id"},{mDataProp:"descripcion"},{mDataProp:"cantidad",sType:"formatted-num"},{mDataProp:"pventa",sType:"formatted-num"},{mDataProp:"iva",sType:"formatted-num"},{mDataProp:"total",sType:"formatted-num"}]});productosventa=$("#ajaxventa").dataTable({bProcessing:true,bJQueryUI:true,oLanguage:A,aoColumns:[{mDataProp:"id"},{mDataProp:"descripcion"},{mDataProp:"cantidad",sType:"formatted-num"},{mDataProp:"pventa",sType:"formatted-num"},{mDataProp:"iva",sType:"formatted-num"},{mDataProp:"total",sType:"formatted-num"}]});productosdevolucion=$("#listardevolucion").dataTable({bProcessing:true,bJQueryUI:true,oLanguage:A,aoColumns:[{mDataProp:"id"},{mDataProp:"descripcion"},{mDataProp:"cantidad",sType:"formatted-num"},{mDataProp:"estado"},{mDataProp:"pventa",sType:"formatted-num"},{mDataProp:"iva",sType:"formatted-num"},{mDataProp:"total",sType:"formatted-num"}]});ajaxproductos=$(".tablamostrarproductos").dataTable({bProcessing:true,bJQueryUI:true,oLanguage:A,sScrollY:"350px",bPaginate:false,bScrollCollapse:true,aoColumns:[{mDataProp:"id"},{mDataProp:"descripcion"},{mDataProp:"iva",sType:"formatted-num"},{mDataProp:"preciocompra",sType:"formatted-num"},{mDataProp:"precioventa",sType:"formatted-num"},{mDataProp:"stock",sType:"formatted-num"},{mDataProp:"apartado",sType:"formatted-num"},{mDataProp:"reservado",sType:"formatted-num"}]});ajaxproductosreservados=$(".tablamostrarproductosreservados").dataTable({bProcessing:true,bJQueryUI:true,oLanguage:A,sScrollY:"350px",bPaginate:false,bScrollCollapse:true,fnRowCallback:function(E,D,C){var B=Routing.generate("usuario_show",{id:D.clienteid});$("td:eq(1)",E).html("<a href="+B+">"+D.cliente+"</a>");return E},aoColumns:[{mDataProp:"id"},{mDataProp:"cliente"},{mDataProp:"clienteid",bVisible:false},{mDataProp:"reserva"},{mDataProp:"descripcion"},{mDataProp:"iva"},{mDataProp:"preciocompra"},{mDataProp:"precioventa"},{mDataProp:"stock"},{mDataProp:"apartado"},{mDataProp:"reservado"}]});productospedido=$("#ajaxpedido").dataTable({bProcessing:true,bJQueryUI:true,oLanguage:A,aoColumns:[{mDataProp:"id"},{mDataProp:"descripcion"},{mDataProp:"cantidad",sType:"formatted-num"},{mDataProp:"pcompra",sType:"formatted-num"},{mDataProp:"iva",sType:"formatted-num"},{mDataProp:"total",sType:"formatted-num"}]});tablafamilia=$("#tablafamilia").dataTable({bJQueryUI:true,sScrollY:"450px",bPaginate:false,bScrollCollapse:true,oLanguage:A});tabladevolucion=$("#tabladevolucion").dataTable({bJQueryUI:true,bPaginate:false,aoColumns:[null,null,{sType:"formatted-num"},{sType:"formatted-num"},{sType:"formatted-num"},null,null],oLanguage:A});tablainformes=$(".tablainformes").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"450px",bPaginate:false,bScrollCollapse:true,oTableTools:{aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar",mColumns:[0,1,2,3,4,5,6]},{sExtends:"csv",bFooter:false,sButtonText:"Csv",mColumns:[0,1,2,3,4,5,6]},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape",mColumns:[0,1,2,3,4,5,6]}]},aoColumns:[null,{sType:"date-euro"},null,null,{sType:"date-euro"},{sType:"date-euro"},null,{sWidth:"15%"}],oLanguage:A});tablaclientesinforme=$("#clientesinforme").dataTable({bJQueryUI:true,sScrollY:"300px",bPaginate:false,oLanguage:A});tablalistaarqueo=$("#tablalistaarqueo").dataTable({bJQueryUI:true,sDom:'<"H"Tfr>t<"F"ip>',sScrollY:"300px",bPaginate:false,bScrollCollapse:true,oTableTools:{sSwfPath:"../bundles/miomio/js/media/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"copy",bFooter:false,sButtonText:"Copiar"},{sExtends:"csv",bFooter:false,sButtonText:"Csv"},{sExtends:"pdf",bFooter:false,sButtonText:"Pdf",sPdfOrientation:"landscape"}]},oLanguage:A});tablalistaarqueo.columnFilter({bUseColVis:true,aoColumns:[null,{sSelector:"#datepicker1",type:"date-range"},null,null,null,null,null,null,null,{sSelector:"#mostraremparqueo",type:"select"},{sSelector:"#estadoarqueo",type:"select",bRegex:true,values:[{value:"^N",label:"No Confirmado"},{value:"^C",label:"Confirmado"}]}]})});