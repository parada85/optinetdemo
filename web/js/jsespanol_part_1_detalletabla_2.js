$(document).ready(function(){$("#mostrartabla").live("click",function(){$("#tabladetalle").wijdialog("open");if($(this).text()=="Ocultar tabla"){$("#tabladetalle").wijdialog("close");$(this).button("option","label","Mostrar tabla");$(this).css("color","");$("#tablacitasdiv").hide()}else{tablacitas.fnReloadAjax();$(this).button("option","label","Ocultar tabla");$(this).css("color","red");$("#tablacitasdiv").css("display","block");$(".th").click();var A=TableTools.fnGetInstance("tablacitas");A.fnResizeButtons()}});$("#mostrartablafestivo").live("click",function(){$("#tabladetalle").wijdialog({width:500});$("#tabladetalle").wijdialog("open");if($(this).text()=="Ocultar tabla"){$("#tabladetalle").wijdialog("close");$(this).button("option","label","Mostrar tabla");$(this).css("color","");$("#tablafestivosdiv").hide()}else{tablafestivos.fnReloadAjax();$(this).button("option","label","Ocultar tabla");$(this).css("color","red");$("#tablafestivosdiv").css("display","block");$(".th").click();var A=TableTools.fnGetInstance("tablafestivos");A.fnResizeButtons()}});$("#btablapermiso").live("click",function(){if($(this).text()=="Ocultar tabla"){$(this).button("option","label","Mostrar tabla");$(this).css("color","");$("#vacaciones").show();$("#vacaciones").fullCalendar("refetchEvents");$("#tablapermisosdiv").hide()}else{tablapermisos.fnReloadAjax();$(this).button("option","label","Ocultar tabla");$(this).css("color","red");$("#vacaciones").hide();$("#tablapermisosdiv").show();$("#tablapermisosdiv").css("display","block");$(".th").click();var A=TableTools.fnGetInstance("tablapermisos");A.fnResizeButtons()}});$("#mostrartabla1").live("click",function(){$("#tabladetalle").wijdialog("open");if($(this).text()=="Ocultar tabla"){$("#tabladetalle").wijdialog("close");$(this).button("option","label","Mostrar tabla");$(this).css("color","");$("#tablaarqueos").hide();$(".select_filter").wijdropdown("refresh")}else{$(this).button("option","label","Ocultar tabla");$(this).css("color","red");$("#tablaarqueos").show();$(".select_filter").wijdropdown("refresh");$(".th").click();var A=TableTools.fnGetInstance("tablalistaarqueo");A.fnResizeButtons()}});$(".fechas").change(function(){$("#detalles").wijdialog("open");$(".divajax1").show();$(".divajax").show();$(".divajax2").hide();var A=$("td",this.parentNode.parentNode.parentNode.parentNode);var G=$(A[0]).text();var C=$(this).val();$(".detalleventa").css("color","");$(".detalleventa").button("option","label","Detalle");$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(".apartado").css("color","");$(".reserva").css("color","");var E=$(this).val();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");$(this).val(E);$(this).wijdropdown("refresh");if(C==""){$(".divajax1").hide();$(".divajax").hide();$("#detalles").wijdialog("close")}else{$(".divajax span").html("Productos de la venta: "+G);var D=Routing.generate("facturapdf",{id:G});$(".divajax .id1").html("<a class='fancybox botondocumento' href="+D+">Documento</a>");$(".divajax1 span").html("Productos de la devolución: "+C);var D=Routing.generate("documentodevolucionpdf",{id:C});$(".divajax1 .id1").html("<a class='fancybox botondocumento' href="+D+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var B=Routing.generate("productosventa",{operacionid:G});productosventa.fnReloadAjax(B);var F=Routing.generate("productosdevolucion",{operacionid:C});productosdevolucion.fnReloadAjax(F)}});$(".detallepedido").live("click",function(){$("#detalles").wijdialog("open");$(".divajax1 ,.divajax2, .divajax").hide();if($(this).text()=="Ocultar"){$("#detalles").wijdialog("close");$(".divajaxpedido").hide();$(this).button("option","label","Detalle");$(this).css("color","")}else{$(".divajaxpedido").show();$(".divajaxpedido").css("color","");$(this).css("color","red");var D=$(this).attr("id");if(D==null){var A=$("td",this.parentNode.parentNode);D=$(A[0]).text();info="Productos del pedido: "+D+" Fecha: "+$(A[2]).text()+" Total: "+$(A[4]).text()}else{var A=$("td",this.parentNode.parentNode);info="Productos del pedido: "+D}var C=Routing.generate("productospedido",{id:D});productospedido.fnReloadAjax(C);var A=$("td",this.parentNode.parentNode);$(".id").html(info);var B=Routing.generate("pedidopdf",{id:D});$(".id1").html("<a class='fancybox botondocumento' href="+B+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});$(".detallepedido, .detalleventa, .detallereserva, .detalledevolucion").button("option","label","Detalle");$(".detallepedido, .detalleventa, .detallereserva, .detalledevolucion").css("color","");$(this).css("color","red");$(this).button("option","label","Ocultar")}});$(".detalleventa").live("click",function(){$("#detalles").wijdialog("open");$(".divajax1 ,.divajax2, .divajaxpedido").hide();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");var A=$("td",this.parentNode.parentNode);if($(this).text()=="Ocultar"){$("#detalles").wijdialog("close");$(".divajax,.divajax1,.divajax2").hide();$(".detalleventa, .detallereserva").button("option","label","Detalle");$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(this).css("color","")}else{$(".divajax").show();$(".detalleventa, .detallereserva, .detalledevolucion, .detallepedido").css("color","");$(".detalleventa, .detallereserva, .detalledevolucion, .detallepedido").button("option","label","Detalle");$(this).css("color","red");var D=$(this).attr("id");if(D==null){var A=$("td",this.parentNode.parentNode);D=$(A[0]).text();info="Productos de la venta: "+D+" Fecha: "+$(A[3]).text()+" Total: "+$(A[4]).text()}else{var A=$("td",this.parentNode.parentNode);info="Productos de la venta: "+D}$(".id").html(info);var B=Routing.generate("facturapdf",{id:D});$(".id1").html("<a class='fancybox botondocumento' href="+B+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var C=Routing.generate("productosventa",{operacionid:D});productosventa.fnReloadAjax(C);$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(this).button("option","label","Ocultar")}});$(".detallereserva").live("click",function(){$("#detalles").wijdialog("open");$(".divajax1,.divajax, .divajaxpedido").hide();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");if($(this).text()=="Ocultar"){$("#detalles").wijdialog("close");$(".divajax,.divajax1,.divajax2").hide();$(".detalleventa, .detallereserva").button("option","label","Detalle");$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(this).css("color","")}else{$(".divajax2").show();$(".detalleventa, .detallereserva, .detalledevolucion").css("color","");$(".detalleventa, .detallereserva, .detalledevolucion").button("option","label","Detalle");$(this).css("color","red");var D=$(this).attr("id");if(D==null){var A=$("td",this.parentNode.parentNode);D=$(A[0]).text();info="Productos de reserva/apartado: "+D+" Fecha: "+$(A[3]).text()+" Total: "+$(A[4]).text()}else{var A=$("td",this.parentNode.parentNode);info="Productos de reserva/apartado: "+D}$(".id").html(info);var B=Routing.generate("reservapdf",{id:D});$(".id1").html("<a class='fancybox botondocumento' href="+B+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var C=Routing.generate("productosreserva",{operacionid:D});productosreserva.fnReloadAjax(C);$(".apartado").button("option","label","Apartado");$(".reserva").button("option","label","Reserva");$(this).button("option","label","Ocultar")}});$(".detalledevolucion").live("click",function(){$("#detalles").wijdialog("open");$(".divajax2,.divajaxpedido").hide();$(".fechas").val(0);$(".fechas").wijdropdown("refresh");if($(this).text()=="Ocultar"){$("#detalles").wijdialog("close");$(".divajax,.divajax1,.divajax2").hide();$(this).button("option","label","Detalle");$(this).css("color","")}else{$(".detalleventa, .detallereserva, .detalledevolucion, .detallepedido").css("color","");$(".detalleventa, .detallereserva, .detalledevolucion, .detallepedido").button("option","label","Detalle");$(this).css("color","red");var E=$(this).attr("id");if(E==null){$(".divajax1,.divajax").show();var A=$("td",this.parentNode.parentNode);E=$(A[0]).text();$(".divajax .id").html("Productos de la venta: "+$(this).attr("class").split(" ")[0]);$(".divajax1 .id").html("Productos de la devolución: "+E+" Fecha:"+$(A[3]).text()+" Total:"+$(A[4]).text());var C=Routing.generate("facturapdf",{id:$(this).attr("class").split(" ")[0]});$(".divajax .id1").html("<a class='fancybox botondocumento' href="+C+">Documento</a>");var C=Routing.generate("documentodevolucionpdf",{id:E});$(".divajax1 .id1").html("<a class='fancybox botondocumento' href="+C+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var B=Routing.generate("productosventa",{operacionid:$(this).attr("class").split(" ")[0]});productosventa.fnReloadAjax(B);var D=Routing.generate("productosdevolucion",{operacionid:E});productosdevolucion.fnReloadAjax(D);$(".detalledevolucion").button("option","label","Detalle");$(this).button("option","label","Ocultar")}else{var A=$("td",this.parentNode.parentNode);$(".divajax1").show();$(".divajax").hide();$(".id").html("Productos de la devolución: "+E);var C=Routing.generate("documentodevolucionpdf",{id:E});$(".divajax1 .id1").html("<a class='fancybox botondocumento' href="+C+">Documento</a>");$(".botondocumento").button({icons:{primary:"ui-icon-document"}});var D=Routing.generate("productosdevolucion",{operacionid:E});productosdevolucion.fnReloadAjax(D);$(".detalledevolucion").button("option","label","Detalle");$(this).button("option","label","Ocultar")}}});$(".mostrarproductos").live("click",function(){$("#detalles1").wijdialog("open");if($(this).text()=="Ocultar"){$("#detalles1").wijdialog("close");$(this).button("option","label","Productos");$(this).css("color","")}else{$(".mostrarproductos").css("color","");$(this).css("color","red");var B=$(this).attr("id");var A=$("td",this.parentNode.parentNode);$(".id").html("Productos de la familia: "+$(A[0]).text());var C=Routing.generate("ajaxproductos",{idfamilia:B});ajaxproductos.fnReloadAjax(C);$(".mostrarproductos").button("option","label","Productos");$(this).button("option","label","Ocultar")}});$(".mostrarproductos1").live("click",function(){$(".divproductosreservados").hide();$(".divproductos").show();$("#detalles1").wijdialog("open");if($(this).text()=="Ocultar"){$("#detalles1").wijdialog("close");$(this).button("option","label","Productos");$(this).css("color","")}else{$(".mostrarproductos1").css("color","");$(this).css("color","red");var A=$("td",this.parentNode.parentNode);nombre=$(A[0]).text();$(".id").html("Productos del proveedor: "+nombre);var B=$(this).attr("id");var C=Routing.generate("ajaxproductos1",{idproveedor:B});ajaxproductos.fnReloadAjax(C);$(".mostrarproductos1").button("option","label","Productos");$(".mostrarproductos2").button("option","label","Reservados");$(".mostrarproductos2").css("color","");$(this).button("option","label","Ocultar")}});$(".mostrarproductos2").live("click",function(){$(".divproductos").hide();$(".divproductosreservados").show();$("#detalles1").wijdialog("open");if($(this).text()=="Ocultar"){$("#detalles1").wijdialog("close");$(this).button("option","label","Reservados");$(this).css("color","")}else{$(".mostrarproductos2").css("color","");$(this).css("color","red");var A=$("td",this.parentNode.parentNode);nombre=$(A[0]).text();$(".id").html("Productos reservados al proveedor: "+nombre);var B=$(this).attr("id");var C=Routing.generate("ajaxproductos2",{idproveedor:B});ajaxproductosreservados.fnReloadAjax(C);$(".mostrarproductos1").button("option","label","Productos");$(".mostrarproductos1").css("color","");$(".mostrarproductos2").button("option","label","Reservados");$(this).button("option","label","Ocultar")}})});