if(jQuery){(function(g){g.minicolors={defaultSettings:{animationSpeed:100,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",hide:null,hideSpeed:100,inline:false,letterCase:"lowercase",opacity:false,position:"default",show:null,showSpeed:100,swatchPosition:"left",textfield:true,theme:"default"}};g.extend(g.fn,{minicolors:function(w,v){switch(w){case"destroy":g(this).each(function(){u(g(this))});return g(this);case"hide":l();return g(this);case"opacity":if(v===undefined){return g(this).attr("data-opacity")}else{g(this).each(function(){f(g(this).attr("data-opacity",v))});return g(this)}case"rgbObject":return j(g(this),w==="rgbaObject");case"rgbString":case"rgbaString":return k(g(this),w==="rgbaString");case"settings":if(v===undefined){return g(this).data("minicolors-settings")}else{g(this).each(function(){var x=g(this).data("minicolors-settings")||{};u(g(this));g(this).minicolors(g.extend(true,x,v))});return g(this)}case"show":t(g(this).eq(0));return g(this);case"value":if(v===undefined){return g(this).val()}else{g(this).each(function(){f(g(this).val(v))});return g(this)}case"create":default:if(w!=="create"){v=w}g(this).each(function(){q(g(this),v)});return g(this)}}});function q(v,x){var y=g('<span class="minicolors" />'),w=g.minicolors.defaultSettings;if(v.data("minicolors-initialized")){return}x=g.extend(true,{},w,x);y.addClass("minicolors-theme-"+x.theme).addClass("minicolors-swatch-position-"+x.swatchPosition).toggleClass("minicolors-swatch-left",x.swatchPosition==="left").toggleClass("minicolors-with-opacity",x.opacity);if(x.position!==undefined){g.each(x.position.split(" "),function(){y.addClass("minicolors-position-"+this)})}v.addClass("minicolors-input").data("minicolors-initialized",true).data("minicolors-settings",x).prop("size",7).prop("maxlength",7).wrap(y).after('<span class="minicolors-panel minicolors-slider-'+x.control+'"><span class="minicolors-slider"><span class="minicolors-picker"></span></span><span class="minicolors-opacity-slider"><span class="minicolors-picker"></span></span><span class="minicolors-grid"><span class="minicolors-grid-inner"></span><span class="minicolors-picker"><span></span></span></span></span>');v.parent().find(".minicolors-panel").on("selectstart",function(){return false}).end();if(x.swatchPosition==="left"){v.before('<span class="minicolors-swatch"><span></span></span>')}else{v.after('<span class="minicolors-swatch"><span></span></span>')}if(!x.textfield){v.addClass("minicolors-hidden")}if(x.inline){v.parent().addClass("minicolors-inline")}b(v,false,true)}function u(v){var w=v.parent();v.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeProp("maxlength").removeClass("minicolors-input");w.before(v).remove()}function f(v){b(v)}function t(w){var y=w.parent(),v=y.find(".minicolors-panel"),x=w.data("minicolors-settings");if(!w.data("minicolors-initialized")||w.prop("disabled")||y.hasClass("minicolors-inline")||y.hasClass("minicolors-focus")){return}l();y.addClass("minicolors-focus");v.stop(true,true).fadeIn(x.showSpeed,function(){if(x.show){x.show.call(w.get(0))}})}function l(){g(".minicolors-input").each(function(){var v=g(this),w=v.data("minicolors-settings"),x=v.parent();if(w.inline){return}x.find(".minicolors-panel").fadeOut(w.hideSpeed,function(){if(x.hasClass("minicolors-focus")){if(w.hide){w.hide.call(v.get(0))}}x.removeClass("minicolors-focus")})})}function p(I,w,z){var L=I.parents(".minicolors").find(".minicolors-input"),A=L.data("minicolors-settings"),G=I.find("[class$=-picker]"),F=I.offset().left,E=I.offset().top,K=Math.round(w.pageX-F),J=Math.round(w.pageY-E),C=z?A.animationSpeed:0,D,B,v,H;if(w.originalEvent.changedTouches){K=w.originalEvent.changedTouches[0].pageX-F;J=w.originalEvent.changedTouches[0].pageY-E}if(K<0){K=0}if(J<0){J=0}if(K>I.width()){K=I.width()}if(J>I.height()){J=I.height()}if(I.parent().is(".minicolors-slider-wheel")&&G.parent().is(".minicolors-grid")){D=75-K;B=75-J;v=Math.sqrt(D*D+B*B);H=Math.atan2(B,D);if(H<0){H+=Math.PI*2}if(v>75){v=75;K=75-(75*Math.cos(H));J=75-(75*Math.sin(H))}K=Math.round(K);J=Math.round(J)}if(I.is(".minicolors-grid")){G.stop(true).animate({top:J+"px",left:K+"px"},C,A.animationEasing,function(){i(L,I)})}else{G.stop(true).animate({top:J+"px"},C,A.animationEasing,function(){i(L,I)})}}function i(O,W){function T(y,x){var Y,X;if(!y.length||!x){return null}Y=y.offset().left;X=y.offset().top;return{x:Y-x.offset().left+(y.outerWidth()/2),y:X-x.offset().top+(y.outerHeight()/2)}}var F,G,V,w,M,L,Q,C,J=O.val(),D=O.attr("data-opacity"),E=O.parent(),U=O.data("minicolors-settings"),P=E.find(".minicolors-panel"),R=E.find(".minicolors-swatch"),v=E.find(".minicolors-grid"),S=E.find(".minicolors-slider"),I=E.find(".minicolors-opacity-slider"),H=v.find("[class$=-picker]"),N=S.find("[class$=-picker]"),B=I.find("[class$=-picker]"),A=T(H,v),z=T(N,S),K=T(B,I);if(W.is(".minicolors-grid, .minicolors-slider")){switch(U.control){case"wheel":M=(v.width()/2)-A.x;L=(v.height()/2)-A.y;Q=Math.sqrt(M*M+L*L);C=Math.atan2(L,M);if(C<0){C+=Math.PI*2}if(Q>75){Q=75;A.x=69-(75*Math.cos(C));A.y=69-(75*Math.sin(C))}G=n(Q/0.75,0,100);F=n(C*180/Math.PI,0,360);V=n(100-Math.floor(z.y*(100/S.height())),0,100);J=c({h:F,s:G,b:V});S.css("backgroundColor",c({h:F,s:G,b:100}));break;case"saturation":F=n(parseInt(A.x*(360/v.width())),0,360);G=n(100-Math.floor(z.y*(100/S.height())),0,100);V=n(100-Math.floor(A.y*(100/v.height())),0,100);J=c({h:F,s:G,b:V});S.css("backgroundColor",c({h:F,s:100,b:V}));E.find(".minicolors-grid-inner").css("opacity",G/100);break;case"brightness":F=n(parseInt(A.x*(360/v.width())),0,360);G=n(100-Math.floor(A.y*(100/v.height())),0,100);V=n(100-Math.floor(z.y*(100/S.height())),0,100);J=c({h:F,s:G,b:V});S.css("backgroundColor",c({h:F,s:G,b:100}));E.find(".minicolors-grid-inner").css("opacity",1-(V/100));break;default:F=n(360-parseInt(z.y*(360/S.height())),0,360);G=n(Math.floor(A.x*(100/v.width())),0,100);V=n(100-Math.floor(A.y*(100/v.height())),0,100);J=c({h:F,s:G,b:V});v.css("backgroundColor",c({h:F,s:100,b:100}));break}O.val(m(J,U.letterCase))}if(W.is(".minicolors-opacity-slider")){if(U.opacity){D=parseFloat(1-(K.y/I.height())).toFixed(2)}else{D=1}if(U.opacity){O.attr("data-opacity",D)}}R.find("SPAN").css({backgroundColor:J,opacity:D});e(O,J,D)}function b(J,K,C){var E,M,A,H,G,L,z,B=J.parent(),P=J.data("minicolors-settings"),N=B.find(".minicolors-swatch"),v=B.find(".minicolors-grid"),O=B.find(".minicolors-slider"),F=B.find(".minicolors-opacity-slider"),D=v.find("[class$=-picker]"),I=O.find("[class$=-picker]"),w=F.find("[class$=-picker]");E=m(r(J.val(),true),P.letterCase);if(!E){E=m(r(P.defaultValue,true))}M=d(E);if(!K){J.val(E)}if(P.opacity){A=J.attr("data-opacity")===""?1:n(parseFloat(J.attr("data-opacity")).toFixed(2),0,1);if(isNaN(A)){A=1}J.attr("data-opacity",A);N.find("SPAN").css("opacity",A);G=n(F.height()-(F.height()*A),0,F.height());w.css("top",G+"px")}N.find("SPAN").css("backgroundColor",E);switch(P.control){case"wheel":L=n(Math.ceil(M.s*0.75),0,v.height()/2);z=M.h*Math.PI/180;H=n(75-Math.cos(z)*L,0,v.width());G=n(75-Math.sin(z)*L,0,v.height());D.css({top:G+"px",left:H+"px"});G=150-(M.b/(100/v.height()));if(E===""){G=0}I.css("top",G+"px");O.css("backgroundColor",c({h:M.h,s:M.s,b:100}));break;case"saturation":H=n((5*M.h)/12,0,150);G=n(v.height()-Math.ceil(M.b/(100/v.height())),0,v.height());D.css({top:G+"px",left:H+"px"});G=n(O.height()-(M.s*(O.height()/100)),0,O.height());I.css("top",G+"px");O.css("backgroundColor",c({h:M.h,s:100,b:M.b}));B.find(".minicolors-grid-inner").css("opacity",M.s/100);break;case"brightness":H=n((5*M.h)/12,0,150);G=n(v.height()-Math.ceil(M.s/(100/v.height())),0,v.height());D.css({top:G+"px",left:H+"px"});G=n(O.height()-(M.b*(O.height()/100)),0,O.height());I.css("top",G+"px");O.css("backgroundColor",c({h:M.h,s:M.s,b:100}));B.find(".minicolors-grid-inner").css("opacity",1-(M.b/100));break;default:H=n(Math.ceil(M.s/(100/v.width())),0,v.width());G=n(v.height()-Math.ceil(M.b/(100/v.height())),0,v.height());D.css({top:G+"px",left:H+"px"});G=n(O.height()-(M.h/(360/O.height())),0,O.height());I.css("top",G+"px");v.css("backgroundColor",c({h:M.h,s:100,b:100}));break}if(!C){e(J,E,A)}}function e(v,y,w){var x=v.data("minicolors-settings");if(y+w!==v.data("minicolors-lastChange")){v.data("minicolors-lastChange",y+w);if(x.change){if(x.changeDelay){clearTimeout(v.data("minicolors-changeTimeout"));v.data("minicolors-changeTimeout",setTimeout(function(){x.change.call(v.get(0),y,w)},x.changeDelay))}else{x.change.call(v.get(0),y,w)}}}}function j(v){var y=r(g(v).val(),true),x=o(y),w=g(v).attr("data-opacity");if(!x){return null}if(w!==undefined){g.extend(x,{a:parseFloat(w)})}return x}function k(v,z){var y=r(g(v).val(),true),x=o(y),w=g(v).attr("data-opacity");if(!x){return null}if(w===undefined){w=1}if(z){return"rgba("+x.r+", "+x.g+", "+x.b+", "+parseFloat(w)+")"}else{return"rgb("+x.r+", "+x.g+", "+x.b+")"}}function m(v,w){return w==="uppercase"?v.toUpperCase():v.toLowerCase()}function r(v,w){v=v.replace(/[^A-F0-9]/ig,"");if(v.length!==3&&v.length!==6){return""}if(v.length===3&&w){v=v[0]+v[0]+v[1]+v[1]+v[2]+v[2]}return"#"+v}function n(x,w,v){if(x<w){x=w}if(x>v){x=v}return x}function s(w){var y={};var C=Math.round(w.h);var B=Math.round(w.s*255/100);var x=Math.round(w.b*255/100);if(B===0){y.r=y.g=y.b=x}else{var D=x;var A=(255-B)*x/255;var z=(D-A)*(C%60)/60;if(C===360){C=0}if(C<60){y.r=D;y.b=A;y.g=A+z}else{if(C<120){y.g=D;y.b=A;y.r=D-z}else{if(C<180){y.g=D;y.r=A;y.b=A+z}else{if(C<240){y.b=D;y.r=A;y.g=D-z}else{if(C<300){y.b=D;y.g=A;y.r=A+z}else{if(C<360){y.r=D;y.g=A;y.b=D-z}else{y.r=0;y.g=0;y.b=0}}}}}}}return{r:Math.round(y.r),g:Math.round(y.g),b:Math.round(y.b)}}function a(v){var w=[v.r.toString(16),v.g.toString(16),v.b.toString(16)];g.each(w,function(x,y){if(y.length===1){w[x]="0"+y}});return"#"+w.join("")}function c(v){return a(s(v))}function d(w){var v=h(o(w));if(v.s===0){v.h=360}return v}function h(x){var w={h:0,s:0,b:0};var y=Math.min(x.r,x.g,x.b);var v=Math.max(x.r,x.g,x.b);var z=v-y;w.b=v;w.s=v!==0?255*z/v:0;if(w.s!==0){if(x.r===v){w.h=(x.g-x.b)/z}else{if(x.g===v){w.h=2+(x.b-x.r)/z}else{w.h=4+(x.r-x.g)/z}}}else{w.h=-1}w.h*=60;if(w.h<0){w.h+=360}w.s*=100/255;w.b*=100/255;return w}function o(v){v=parseInt(((v.indexOf("#")>-1)?v.substring(1):v),16);return{r:v>>16,g:(v&65280)>>8,b:(v&255)}}g(document).on("mousedown.minicolors touchstart.minicolors",function(v){if(!g(v.target).parents().add(v.target).hasClass("minicolors")){l()}}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(v){var w=g(this);v.preventDefault();g(document).data("minicolors-target",w);p(w,v,true)}).on("mousemove.minicolors touchmove.minicolors",function(v){var w=g(document).data("minicolors-target");if(w){p(w,v)}}).on("mouseup.minicolors touchend.minicolors",function(){g(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(w){var v=g(this).parent().find(".minicolors-input"),x=v.parent();if(x.hasClass("minicolors-focus")){l(v)}else{t(v)}}).on("focus.minicolors",".minicolors-input",function(w){var v=g(this);if(!v.data("minicolors-initialized")){return}t(v)}).on("blur.minicolors",".minicolors-input",function(x){var v=g(this),w=v.data("minicolors-settings");if(!v.data("minicolors-initialized")){return}v.val(r(v.val(),true));if(v.val()===""){v.val(r(w.defaultValue,true))}v.val(m(v.val(),w.letterCase))}).on("keydown.minicolors",".minicolors-input",function(w){var v=g(this);if(!v.data("minicolors-initialized")){return}switch(w.keyCode){case 9:l();break;case 27:l();v.blur();break}}).on("keyup.minicolors",".minicolors-input",function(w){var v=g(this);if(!v.data("minicolors-initialized")){return}b(v,true)}).on("paste.minicolors",".minicolors-input",function(w){var v=g(this);if(!v.data("minicolors-initialized")){return}setTimeout(function(){b(v,true)},1)})})(jQuery)};